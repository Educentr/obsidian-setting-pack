/*
-------------------------------------------
JS Engine - Release Build
-------------------------------------------
By: Moritz Jung (https://mprojectscode.github.io/)
Time: Wed, 20 Mar 2024 21:48:22 GMT
Version: 0.1.4
-------------------------------------------
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Sl=Object.create;var Jn=Object.defineProperty;var Il=Object.getOwnPropertyDescriptor;var Pl=Object.getOwnPropertyNames;var Tl=Object.getPrototypeOf,Cl=Object.prototype.hasOwnProperty;var Fl=(n,e,t)=>e in n?Jn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ut=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Zs=(n,e)=>{for(var t in e)Jn(n,t,{get:e[t],enumerable:!0})},Ks=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Pl(e))!Cl.call(n,i)&&i!==t&&Jn(n,i,{get:()=>e[i],enumerable:!(r=Il(e,i))||r.enumerable});return n};var Gt=(n,e,t)=>(t=n!=null?Sl(Tl(n)):{},Ks(e||!n||!n.__esModule?Jn(t,"default",{value:n,enumerable:!0}):t,n)),Ol=n=>Ks(Jn({},"__esModule",{value:!0}),n);var Ce=(n,e,t)=>(Fl(n,typeof e!="symbol"?e+"":e,t),t);var ka=Ut((ys,gs)=>{(function(n,e){typeof ys=="object"&&typeof gs!="undefined"?gs.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis!="undefined"?globalThis:n||self).dayjs=e()})(ys,function(){"use strict";var n=1e3,e=6e4,t=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",l="week",c="month",d="quarter",h="year",f="date",_="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var x=["th","st","nd","rd"],b=C%100;return"["+C+(x[(b-20)%10]||x[b]||x[0])+"]"}},U=function(C,x,b){var A=String(C);return!A||A.length>=x?C:""+Array(x+1-A.length).join(b)+C},K={s:U,z:function(C){var x=-C.utcOffset(),b=Math.abs(x),A=Math.floor(b/60),P=b%60;return(x<=0?"+":"-")+U(A,2,"0")+":"+U(P,2,"0")},m:function C(x,b){if(x.date()<b.date())return-C(b,x);var A=12*(b.year()-x.year())+(b.month()-x.month()),P=x.clone().add(A,c),J=b-P<0,z=x.clone().add(A+(J?-1:1),c);return+(-(A+(b-P)/(J?P-z:z-P))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:c,y:h,w:l,d:a,D:f,h:s,m:o,s:i,ms:r,Q:d}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},ne="en",V={};V[ne]=q;var ue="$isDayjsObject",ce=function(C){return C instanceof ae||!(!C||!C[ue])},g=function C(x,b,A){var P;if(!x)return ne;if(typeof x=="string"){var J=x.toLowerCase();V[J]&&(P=J),b&&(V[J]=b,P=J);var z=x.split("-");if(!P&&z.length>1)return C(z[0])}else{var B=x.name;V[B]=x,P=B}return!A&&P&&(ne=P),P||!A&&ne},w=function(C,x){if(ce(C))return C.clone();var b=typeof x=="object"?x:{};return b.date=C,b.args=arguments,new ae(b)},m=K;m.l=g,m.i=ce,m.w=function(C,x){return w(C,{locale:x.$L,utc:x.$u,x:x.$x,$offset:x.$offset})};var ae=function(){function C(b){this.$L=g(b.locale,null,!0),this.parse(b),this.$x=this.$x||b.x||{},this[ue]=!0}var x=C.prototype;return x.parse=function(b){this.$d=function(A){var P=A.date,J=A.utc;if(P===null)return new Date(NaN);if(m.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var z=P.match(y);if(z){var B=z[2]-1||0,F=(z[7]||"0").substring(0,3);return J?new Date(Date.UTC(z[1],B,z[3]||1,z[4]||0,z[5]||0,z[6]||0,F)):new Date(z[1],B,z[3]||1,z[4]||0,z[5]||0,z[6]||0,F)}}return new Date(P)}(b),this.init()},x.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},x.$utils=function(){return m},x.isValid=function(){return this.$d.toString()!==_},x.isSame=function(b,A){var P=w(b);return this.startOf(A)<=P&&P<=this.endOf(A)},x.isAfter=function(b,A){return w(b)<this.startOf(A)},x.isBefore=function(b,A){return this.endOf(A)<w(b)},x.$g=function(b,A,P){return m.u(b)?this[A]:this.set(P,b)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(b,A){var P=this,J=!!m.u(A)||A,z=m.p(b),B=function(He,ie){var ge=m.w(P.$u?Date.UTC(P.$y,ie,He):new Date(P.$y,ie,He),P);return J?ge:ge.endOf(a)},F=function(He,ie){return m.w(P.toDate()[He].apply(P.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(ie)),P)},T=this.$W,j=this.$M,re=this.$D,We="set"+(this.$u?"UTC":"");switch(z){case h:return J?B(1,0):B(31,11);case c:return J?B(1,j):B(0,j+1);case l:var Q=this.$locale().weekStart||0,ye=(T<Q?T+7:T)-Q;return B(J?re-ye:re+(6-ye),j);case a:case f:return F(We+"Hours",0);case s:return F(We+"Minutes",1);case o:return F(We+"Seconds",2);case i:return F(We+"Milliseconds",3);default:return this.clone()}},x.endOf=function(b){return this.startOf(b,!1)},x.$set=function(b,A){var P,J=m.p(b),z="set"+(this.$u?"UTC":""),B=(P={},P[a]=z+"Date",P[f]=z+"Date",P[c]=z+"Month",P[h]=z+"FullYear",P[s]=z+"Hours",P[o]=z+"Minutes",P[i]=z+"Seconds",P[r]=z+"Milliseconds",P)[J],F=J===a?this.$D+(A-this.$W):A;if(J===c||J===h){var T=this.clone().set(f,1);T.$d[B](F),T.init(),this.$d=T.set(f,Math.min(this.$D,T.daysInMonth())).$d}else B&&this.$d[B](F);return this.init(),this},x.set=function(b,A){return this.clone().$set(b,A)},x.get=function(b){return this[m.p(b)]()},x.add=function(b,A){var P,J=this;b=Number(b);var z=m.p(A),B=function(j){var re=w(J);return m.w(re.date(re.date()+Math.round(j*b)),J)};if(z===c)return this.set(c,this.$M+b);if(z===h)return this.set(h,this.$y+b);if(z===a)return B(1);if(z===l)return B(7);var F=(P={},P[o]=e,P[s]=t,P[i]=n,P)[z]||1,T=this.$d.getTime()+b*F;return m.w(T,this)},x.subtract=function(b,A){return this.add(-1*b,A)},x.format=function(b){var A=this,P=this.$locale();if(!this.isValid())return P.invalidDate||_;var J=b||"YYYY-MM-DDTHH:mm:ssZ",z=m.z(this),B=this.$H,F=this.$m,T=this.$M,j=P.weekdays,re=P.months,We=P.meridiem,Q=function(ie,ge,$,Ke){return ie&&(ie[ge]||ie(A,J))||$[ge].slice(0,Ke)},ye=function(ie){return m.s(B%12||12,ie,"0")},He=We||function(ie,ge,$){var Ke=ie<12?"AM":"PM";return $?Ke.toLowerCase():Ke};return J.replace(k,function(ie,ge){return ge||function($){switch($){case"YY":return String(A.$y).slice(-2);case"YYYY":return m.s(A.$y,4,"0");case"M":return T+1;case"MM":return m.s(T+1,2,"0");case"MMM":return Q(P.monthsShort,T,re,3);case"MMMM":return Q(re,T);case"D":return A.$D;case"DD":return m.s(A.$D,2,"0");case"d":return String(A.$W);case"dd":return Q(P.weekdaysMin,A.$W,j,2);case"ddd":return Q(P.weekdaysShort,A.$W,j,3);case"dddd":return j[A.$W];case"H":return String(B);case"HH":return m.s(B,2,"0");case"h":return ye(1);case"hh":return ye(2);case"a":return He(B,F,!0);case"A":return He(B,F,!1);case"m":return String(F);case"mm":return m.s(F,2,"0");case"s":return String(A.$s);case"ss":return m.s(A.$s,2,"0");case"SSS":return m.s(A.$ms,3,"0");case"Z":return z}return null}(ie)||z.replace(":","")})},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(b,A,P){var J,z=this,B=m.p(A),F=w(b),T=(F.utcOffset()-this.utcOffset())*e,j=this-F,re=function(){return m.m(z,F)};switch(B){case h:J=re()/12;break;case c:J=re();break;case d:J=re()/3;break;case l:J=(j-T)/6048e5;break;case a:J=(j-T)/864e5;break;case s:J=j/t;break;case o:J=j/e;break;case i:J=j/n;break;default:J=j}return P?J:m.a(J)},x.daysInMonth=function(){return this.endOf(c).$D},x.$locale=function(){return V[this.$L]},x.locale=function(b,A){if(!b)return this.$L;var P=this.clone(),J=g(b,A,!0);return J&&(P.$L=J),P},x.clone=function(){return m.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},C}(),me=ae.prototype;return w.prototype=me,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",h],["$D",f]].forEach(function(C){me[C[1]]=function(x){return this.$g(x,C[0],C[1])}}),w.extend=function(C,x){return C.$i||(C(x,ae,w),C.$i=!0),w},w.locale=g,w.isDayjs=ce,w.unix=function(C){return w(1e3*C)},w.en=V[ne],w.Ls=V,w.p={},w})});var Jr=Ut(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.P_HELPERS=Qe.ParserHelpers=Qe.validateRegexFlags=Qe.validateRange=Qe.getIndex=Qe.arrayUnion=void 0;var Es=er();function Du(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0)return e;if(e===void 0)return n;for(let t of e)n.includes(t)||n.push(t);return n}}Qe.arrayUnion=Du;function Nu(n){return n===void 0?-1:n.index}Qe.getIndex=Nu;function qu(n,e){if(e<n)throw new Error(`Invalid Range: max might not be smaller than min. Received [${n}, ${e}].`);if(n<0||e<0)throw new Error(`Invalid Range: max and min might not be smaller than 0. Received [${n}, ${e}].`);if(n===1/0||e===1/0)throw new Error(`Invalid Range: max and min might not be infinity. Received [${n}, ${e}].`);if(!Number.isInteger(n)||!Number.isInteger(e))throw new Error(`Invalid Range: max and min must be integers. Received [${n}, ${e}].`)}Qe.validateRange=qu;function ju(n){for(let e of n)if(e!=="i"&&e!=="m"&&e!=="s"&&e!=="u")throw new Error(`RegExp flag '${e}' is not allowed. The only allowed flags are 'i', 'm', 's' and 'u'.`)}Qe.validateRegexFlags=ju;var Wr=class{followedBy(e){return new Es.Parser(function(r){return e.p(r.copy())})}notFollowedBy(e){return new Es.Parser(function(r){let i=r.copy(),o=e.p(i),s=r.sliceTo(i.position.index);return o.success?r.fail("not '"+s+"'"):r.succeed(void 0)})}test(e){return new Es.Parser(function(r){let i=r.input[r.position.index];return!r.atEOF()&&e(i)?r.succeedOffset(1,i):r.fail(`a character matching ${e}`)})}};Qe.ParserHelpers=Wr;Qe.P_HELPERS=new Wr});var Ss=Ut(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.ParserContext=void 0;var Ms=Jr(),As=class n{constructor(e,t){this.input=e,this.position=t}moveToPosition(e){return this.position=e,this}copy(){return new n(this.input,{index:this.position.index,column:this.position.column,line:this.position.line})}getPosition(){return{index:this.position.index,column:this.position.column,line:this.position.line}}atEOF(){return this.position.index>=this.input.length}advanceTo(e){if(e<this.position.index)throw new Error(`Can not advance backwards. Current pos ${this.position.index}. Advance target index ${e}.`);if(e!==this.position.index){for(let t=this.position.index;t<e;t++)this.input[t]===`
`?(this.position.line+=1,this.position.column=1):this.position.column+=1;this.position.index=e}}sliceTo(e){return this.input.slice(this.position.index,e)}succeedOffset(e,t){return this.succeedAt(this.position.index+e,t)}failOffset(e,t){return this.failAt(this.position.index+e,t)}succeed(e){return this.succeedAt(this.position.index,e)}fail(e){return this.failAt(this.position.index,e)}succeedAt(e,t){return this.advanceTo(e),{success:!0,value:t,furthest:void 0,expected:void 0}}failAt(e,t){return this.advanceTo(e),{success:!1,value:void 0,furthest:this.position,expected:Array.isArray(t)?t:[t]}}merge(e,t){if(e===void 0)return t;let r=(0,Ms.getIndex)(e.furthest),i=(0,Ms.getIndex)(t.furthest);if(i>r)return t;let o=i===r?(0,Ms.arrayUnion)(e.expected,t.expected):e.expected;return t.furthest=e.furthest,t.expected=o,t}};Br.ParserContext=As});var Ps=Ut(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.P_UTILS=void 0;var Ur=er(),pe=Hr(),Is=class n{static position(){return new Ur.Parser(e=>e.succeed(e.getPosition()))}static any(){return new Ur.Parser(e=>e.atEOF()?e.fail("any character"):e.succeedOffset(1,e.input[e.position.index]))}static remaining(){return new Ur.Parser(e=>e.succeedAt(e.input.length,e.input.slice(e.position.index)))}static eof(){return new Ur.Parser(e=>e.atEOF()?e.succeed(void 0):e.fail("eof"))}static digit(){return pe.P.regexp(/^[0-9]/).describe("a digit")}static digits(){return pe.P.regexp(/^[0-9]+/).describe("multiple digits")}static letter(){return pe.P.regexp(/^[a-z]/i).describe("a letter")}static letters(){return pe.P.regexp(/^[a-z]+/i).describe("multiple letters")}static unicodeLetter(){return pe.P.regexp(/^\p{L}/iu).describe("a unicode letter")}static unicodeLetters(){return pe.P.regexp(/^\p{L}+/iu).describe("multiple unicode letters")}static unicodeAlphanumeric(){return pe.P.regexp(/^[\p{L}\p{N}]/iu).describe("a unicode alphanumeric character")}static unicodeAlphanumerics(){return pe.P.regexp(/^[\p{L}\p{N}]+/iu).describe("multiple unicode alphanumeric characters")}static optionalWhitespace(){return pe.P.regexp(/^\s*/).describe("optional whitespace")}static whitespace(){return pe.P.regexp(/^\s+/).describe("whitespace")}static cr(){return pe.P.string("\r")}static lf(){return pe.P.string(`
`)}static crlf(){return pe.P.string(`\r
`)}static newline(){return pe.P.or(this.crlf(),this.lf(),this.cr()).describe("newline")}static prefix(e,t,r){return pe.P.sequenceMap((i,o)=>i.reduce((s,a)=>r(a,s),o),e.many(),t)}static postfix(e,t,r){return pe.P.sequenceMap((i,o)=>o.reduce((s,a)=>r(a,s),i),t,e.many())}static binaryRight(e,t,r){return pe.P.sequenceMap((i,o)=>i.reverse().reduce((s,a)=>{let[l,c]=a;return r(l,c,s)},o),pe.P.sequence(t,e.trim(this.optionalWhitespace())).many(),t)}static binaryLeft(e,t,r){return pe.P.sequenceMap((i,o)=>o.reduce((s,a)=>{let[l,c]=a;return r(s,l,c)},i),t,pe.P.sequence(e.trim(this.optionalWhitespace()),t).many())}static binaryRightRange(e,t,r){return pe.P.sequenceMap((i,o,s)=>i.reverse().reduce((a,l)=>{let[c,d,h]=l;return r({from:c,to:s},d,h,a)},o),pe.P.sequence(n.position(),t,e.trim(this.optionalWhitespace())).many(),t,n.position())}static binaryLeftRange(e,t,r){return pe.P.sequenceMap((i,o,s)=>s.reduce((a,l)=>{let[c,d,h]=l;return r({from:i,to:h},a,c,d)},o),n.position(),t,pe.P.sequence(e.trim(this.optionalWhitespace()),t,n.position()).many())}static func(e,t,r){let i=typeof e=="string"?pe.P.string(e):e;return pe.P.sequenceMap((o,s,a,l,c,d)=>r(o,l),i,pe.P.string("("),this.optionalWhitespace(),t,this.optionalWhitespace(),pe.P.string(")"))}};Gr.P_UTILS=Is});var Cs=Ut(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.ParsingError=yn.createParsingErrorMessage=void 0;function qa(n,e,t){let r=`Expected ${e.expected.sort().join(" or ")}`,i=`Parse Failure: ${r} at index ${e.furthest.index}, line ${e.furthest.line}, column ${e.furthest.column}.`;if(t){let s=n.split(`
`)[e.furthest.line-1],a=`${e.furthest.line} |   `;i+=`

${a}${s}`,i+=`
${" ".repeat(e.furthest.column-1+a.length)}^ (${r})`}return i}yn.createParsingErrorMessage=qa;var Ts=class extends Error{constructor(e,t){super(qa(e,t,!0))}};yn.ParsingError=Ts});var er=Ut(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.Parser=void 0;var zu=Ss(),at=Hr(),Fs=Jr(),gn=Ps(),Wu=Cs(),Os=class n{constructor(e){this.p=e}tryParse(e){return this.p(new zu.ParserContext(e,{index:0,line:1,column:1}))}parse(e){let t=this.tryParse(e);if(t.success)return t.value;throw new Wu.ParsingError(e,t)}or(e){return at.P.or(this,e)}trim(e){return this.wrap(e,e)}trimString(e){return this.trim(at.P.string(e))}wrap(e,t){let r=this;return new n(function(o){let s=e.p(o);if(!s.success)return s;let a=o.merge(s,r.p(o));if(!a.success)return a;let l=o.merge(a,t.p(o));return l.success?o.merge(l,o.succeed(a.value)):l})}wrapString(e,t){return this.wrap(at.P.string(e),at.P.string(t))}then(e){let t=this;return new n(function(i){let o=t.p(i);if(!o.success)return o;let s=i.merge(o,e.p(i));return s.success,s})}skip(e){let t=this;return new n(function(i){let o=t.p(i);if(!o.success)return o;let s=i.merge(o,e.p(i));return s.success?i.merge(s,i.succeed(o.value)):s})}and(e){return at.P.sequence(this,e)}many(){let e=this;return new n(function(r){let i,o=r.position.index,s=[];for(;;){let a=r.copy(),l=e.p(a);if(i=r.merge(i,l),i.success){if(a.position.index===o)throw new Error("infinite loop in many() parser detected");r.moveToPosition(a.position),s.push(i.value)}else return r.merge(i,r.succeed(s))}})}repeat(e,t){(0,Fs.validateRange)(e,t);let r=this;return new n(function(o){let s,a,l=[],c=0;for(;c<e;c++)if(s=r.p(o),a=o.merge(a,s),s.success)l.push(s.value);else return a;for(;c<t;c++){let d=o.copy();if(s=r.p(d),a=o.merge(a,s),s.success)o.moveToPosition(d.position),l.push(s.value);else break}return o.merge(a,o.succeed(l))})}atMost(e){return this.repeat(0,e)}atLeast(e){return at.P.sequenceMap((t,r)=>t.concat(r),this.repeat(e,e),this.many())}separateBy(e){return at.P.separateBy(this,e)}separateByNotEmpty(e){return at.P.separateByNotEmpty(this,e)}result(e){return this.map(()=>e)}map(e){let t=this;return new n(function(i){let o=t.p(i);return o.success&&(o.value=e(o.value)),o})}marker(){return at.P.sequenceMap(function(t,r,i){return{value:r,range:{from:t,to:i}}},gn.P_UTILS.position(),this,gn.P_UTILS.position())}namedMarker(e){return at.P.sequenceMap(function(r,i,o){return{value:i,name:e,range:{from:r,to:o}}},gn.P_UTILS.position(),this,gn.P_UTILS.position())}node(e){return at.P.sequenceMap(function(r,i,o){return e(i,{from:r,to:o})},gn.P_UTILS.position(),this,gn.P_UTILS.position())}followedBy(e){return this.skip(Fs.P_HELPERS.followedBy(e))}notFollowedBy(e){return this.skip(Fs.P_HELPERS.notFollowedBy(e))}describe(e){typeof e=="string"&&(e=[e]);let t=this;return new n(function(i){let o=t.p(i);return o.expected!==void 0&&o.expected.length!==0&&(o.expected=e),o})}box(e){let t=this;return new n(function(i){var o;let s=t.p(i);return s.expected!==void 0&&s.expected.length!==0&&(s.expected=[`(${(o=s.expected)===null||o===void 0?void 0:o.join(" or ")} as part of ${e})`]),s})}optional(e){return this.or(at.P.succeed(e))}chain(e){let t=this;return new n(function(i){let o=t.p(i);if(!o.success)return o;let a=e(o.value).p(i);return i.merge(o,a)})}thenEof(){let e=this;return new n(function(r){let i=e.p(r);return i.success?r.atEOF()?i:r.merge(i,r.fail("eof")):i})}memorize(){let e=this,t="",r=new Map,i=new Map;return new n(function(s){let a=s.position.index;if(s.input!==t)t=s.input,r.clear(),i.clear();else{let c=r.get(a),d=i.get(a);if(c!==void 0&&d!==void 0)return s.moveToPosition(Object.assign({},d)),Object.assign({},c)}let l=e.p(s);return r.set(a,Object.assign({},l)),i.set(a,s.getPosition()),l})}};Vr.Parser=Os});var Hr=Ut(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.P=void 0;var et=er(),Yr=Jr(),Ls=class n{static sequence(...e){if(e.length===0)throw new Error("sequence must have at least one parser argument");return new et.Parser(function(r){let i,o=new Array(e.length);for(let s=0;s<e.length;s++){let l=e[s].p(r);if(i=r.merge(i,l),!i.success)return i;o[s]=i.value}return i.value=o,i})}static sequenceMap(e,...t){if(t.length===0)throw new Error("sequenceMap must have at least one parser argument");return new et.Parser(function(i){let o,s=new Array(t.length);for(let a=0;a<t.length;a++){let c=t[a].p(i);if(o=i.merge(o,c),!o.success)return o;s[a]=o.value}return o.value=e(...s),o})}static createLanguage(e){let t={},r={},i={};for(let o in e)i[o]=n.reference(()=>e[o](t,i)),Object.defineProperty(r,o,{get:()=>{if(t[o]!==void 0)return t[o];throw new Error(`Can not access rule '${o}' in language. Rule is not yet defined. Try to access it via 'ref'.`)}});for(let o in e)t[o]=e[o](r,i);return t}static or(...e){if(e.length===0)throw new Error("or must have at least one alternative");return new et.Parser(function(r){let i;for(let o of e){let s=o,a=r.copy(),l=s.p(a);if(i=r.merge(i,l),i.success)return r.moveToPosition(a.position),i}return i})}static separateBy(e,t){return this.separateByNotEmpty(e,t).or(n.succeed([]))}static separateByNotEmpty(e,t){return this.sequenceMap(function(i,o){return o.unshift(i),o},e,t.then(e).many())}static string(e){let t="'"+e+"'";return new et.Parser(function(i){for(let o=0;o<e.length;o++)if(i.input[i.position.index+o]!==e[o])return i.fail(t);return i.succeedAt(i.position.index+e.length,e)})}static regexp(e,t){(0,Yr.validateRegexFlags)(e.flags);let r=e.source;return t!==void 0?new et.Parser(function(o){let s=o.input.slice(o.position.index),a=e.exec(s);if(a!==null){let l=t!=null?t:0;if(l>=0&&l<=a.length){let d=a[0],h=a[l];return o.succeedOffset(d.length,h)}let c="expected valid match group (0 to "+a.length+") in "+r;return o.fail(c)}else return o.fail(r)}):new et.Parser(function(o){let s=o.input.slice(o.position.index),a=e.exec(s);if(a!==null){let l=a[0];return o.succeedOffset(l.length,l)}else return o.fail(r)})}static succeed(e){return new et.Parser(function(r){return r.succeed(e)})}static fail(e){return new et.Parser(function(r){return r.fail(e)})}static oneOf(e){return Yr.P_HELPERS.test(function(r){return e.includes(r)}).describe(`one character of '${e}'`)}static noneOf(e){return Yr.P_HELPERS.test(function(r){return!e.includes(r)}).describe(`no character of '${e}'`)}static oneStringOf(e){return this.or(...e.map(t=>this.string(t))).describe(e.map(t=>`'${t}'`).join(" or "))}static manyOf(e){return new et.Parser(function(r){let i=r.position.index;for(;i<r.input.length&&e.includes(r.input[i]);i++);return r.succeedAt(i,r.sliceTo(i))})}static manyNotOf(e){return new et.Parser(function(r){let i=r.position.index;for(;i<r.input.length&&!e.includes(r.input[i]);i++);return r.succeedAt(i,r.sliceTo(i))})}static custom(e){return new et.Parser(e)}static range(e,t){let r=e.charCodeAt(0),i=t.charCodeAt(0);return Yr.P_HELPERS.test(function(s){let a=s.charCodeAt(0);return r<=a&&a<=i}).describe(`${e}-${t}`)}static takeWhile(e){return new et.Parser(function(r){let i=r.position.index;for(;i<r.input.length&&e(r.input[i]);)i++;return r.succeedAt(i,r.input.slice(r.position.index,i))})}static reference(e){return new et.Parser(function(r){return e().p(r)})}};Qr.P=Ls});var nc={};Zs(nc,{default:()=>Qo});module.exports=Ol(nc);var ll=require("obsidian");var Ll=require("obsidian"),$s={};var Dt=require("obsidian");var ea=require("obsidian"),Et=class{constructor(e){this.content=e}async render(e,t,r,i){await ea.MarkdownRenderer.render(e,this.content,t,r,i)}};var nn=class{toMarkdown(){return new Et(this.toString())}};var rn=class extends nn{getType(){return"LITERAL"}};var mt=class extends nn{constructor(){super();this.markdownElements=[]}getType(){return"NON_LITERAL"}addElement(t){if(this.allowElement(t))this.markdownElements.push(t);else throw new Error("Element not allowed in container.")}addText(t){let r=new ct(t,!1,!1,!1);return this.addElement(r),this}addBoldText(t){let r=new ct(t,!0,!1,!1);return this.addElement(r),this}addCursiveText(t){let r=new ct(t,!1,!0,!1);return this.addElement(r),this}addUnderlinedText(t){let r=new ct(t,!1,!1,!0);return this.addElement(r),this}addCode(t){let r=new Bn(t);return this.addElement(r),this}createParagraph(t){let r=new Hn(t);return this.addElement(r),r}createHeading(t,r){let i=new Gn(t,r);return this.addElement(i),i}createBlockQuote(){let t=new Yn;return this.addElement(t),t}createCallout(t,r,i=""){let o=new Qn(t,r,i);return this.addElement(o),o}createCodeBlock(t,r){let i=new Vn(t,r);return this.addElement(i),i}createTable(t,r){let i=new Un(t,r);return this.addElement(i),i}createList(t){let r=new Xn(t);return this.addElement(r),r}},ct=class extends rn{constructor(t,r,i,o){super();this.content=t,this.bold=r,this.cursive=i,this.underline=o}toString(){let t="",r="";return this.underline&&(t+="<b>",r="</b>"+r),this.bold&&(t+="**",r="**"+r),this.cursive&&(t+="*",r="*"+r),t+this.content+r}},Bn=class extends rn{constructor(t){super();this.content=t}toString(){return`\`${this.content}\``}},Un=class extends rn{constructor(t,r){super();this.header=t,this.body=r}toString(){let t=this.body.length;if(t===0)return"";let r=this.header.length;if(r===0)return"";for(let s of this.body)if(s.length!==r)throw new Error("Table rows are do not contain the same number of columns.");let i=[];for(let s=0;s<r;s++){let a=0;this.header[s].length>a&&(a=this.header[s].length);for(let l of this.body)l[s].length>a&&(a=l[s].length);i.push(a)}let o="";o+="|";for(let s=0;s<r;s++){let a=this.header[s];a+=" ".repeat(i[s]-a.length),o+=" "+a+" |"}o+=`
`,o+="|";for(let s=0;s<r;s++)o+=" "+"-".repeat(i[s])+" |";o+=`
`;for(let s=0;s<t;s++){o+="|";for(let a=0;a<r;a++){let l=this.body[s][a];l+=" ".repeat(i[a]-l.length),o+=" "+l+" |"}o+=`
`}return o}},Gn=class extends mt{constructor(t,r){super();this.level=t,this.addText(r)}toString(){return`${"#".repeat(this.level)} ${this.markdownElements.map(t=>t.toString()).join("")}`}allowElement(t){return t.getType()==="LITERAL"}},Hn=class extends mt{constructor(e){super(),this.addText(e)}toString(){return this.markdownElements.map(e=>e.toString()).join("")}allowElement(e){return e.getType()==="LITERAL"}},Vn=class extends mt{constructor(t,r){super();this.language=t,this.addText(r)}allowElement(t){return t.getType()==="LITERAL"}toString(){return`\`\`\`${this.language}
${this.markdownElements.map(t=>t.toString()).join("")}
\`\`\``}},Yn=class extends mt{allowElement(e){return!0}toString(){return"> "+this.markdownElements.map(e=>e.toString().replaceAll(`
`,`
> `)).join(`
> 
> `)}},Qn=class extends mt{constructor(t,r,i){super();this.title=t,this.type=r,this.args=i}allowElement(t){return!0}toString(){return`> [!${this.type}|${this.args}] ${this.title}
> `+this.markdownElements.map(t=>t.toString().replaceAll(`
`,`
> `)).join(`
> 
> `)}},Xn=class n extends mt{constructor(t){super();this.ordered=t}allowElement(t){return!0}getPrefix(t){return this.ordered?`${t+1}. `:"- "}toString(){return this.markdownElements.map((t,r)=>t instanceof n?`	${t.toString().replaceAll(`
`,`
	`)}`:`${this.getPrefix(r)}${t.toString().replaceAll(`
`,`
	`)}`).join(`
`)}};var Ht=class extends mt{constructor(){super()}toString(){return this.markdownElements.map(e=>e.toString()).join(`

`)}allowElement(e){return!0}};var Nr=require("obsidian");var Ra=require("obsidian");function le(){}var Zn=n=>n;function xr(n,e){for(let t in e)n[t]=e[t];return n}function ts(n){return n()}function kr(){return Object.create(null)}function we(n){n.forEach(ts)}function De(n){return typeof n=="function"}function X(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function ta(n){return Object.keys(n).length===0}function Dl(n,...e){if(n==null){for(let r of e)r(void 0);return le}let t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function na(n,e,t){n.$$.on_destroy.push(Dl(e,t))}function Ne(n,e,t,r){if(n){let i=ra(n,e,t,r);return n[0](i)}}function ra(n,e,t,r){return n[1]&&r?xr(t.ctx.slice(),n[1](r(e))):t.ctx}function qe(n,e,t,r){if(n[2]&&r){let i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){let o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function je(n,e,t,r,i,o){if(i){let s=ra(e,t,r,o);n.p(s,i)}}function ze(n){if(n.ctx.length>32){let e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function yt(n){return n&&De(n.destroy)?n.destroy:le}var ia=typeof window!="undefined",ns=ia?()=>window.performance.now():()=>Date.now(),Kn=ia?n=>requestAnimationFrame(n):le;var on=new Set;function oa(n){on.forEach(e=>{e.c(n)||(on.delete(e),e.f())}),on.size!==0&&Kn(oa)}function rs(n){let e;return on.size===0&&Kn(oa),{promise:new Promise(t=>{on.add(e={c:n,f:t})}),abort(){on.delete(e)}}}var is=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var Er=class n{constructor(e){Ce(this,"_listeners","WeakMap"in is?new WeakMap:void 0);Ce(this,"_observer");Ce(this,"options");this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!=null?e:this._observer=new ResizeObserver(t=>{var r;for(let i of t)n.entries.set(i.target,i),(r=this._listeners.get(i.target))==null||r(i)})}};Er.entries="WeakMap"in is?new WeakMap:void 0;var sa=!1;function aa(){sa=!0}function la(){sa=!1}function E(n,e){n.appendChild(e)}function Je(n,e,t){let r=Mr(n);if(!r.getElementById(e)){let i=S("style");i.id=e,i.textContent=t,ca(r,i)}}function Mr(n){if(!n)return document;let e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function ua(n){let e=S("style");return e.textContent="/* empty */",ca(Mr(n),e),e.sheet}function ca(n,e){return E(n.head||n,e),e.sheet}function N(n,e,t){n.insertBefore(e,t||null)}function L(n){n.parentNode&&n.parentNode.removeChild(n)}function sn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function S(n){return document.createElement(n)}function se(n){return document.createTextNode(n)}function te(){return se(" ")}function Ae(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function R(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function fa(n){return Array.from(n.childNodes)}function ke(n,e){e=""+e,n.data!==e&&(n.data=e)}function Se(n,e,t){n.classList.toggle(e,!!t)}function Ar(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function da(n){let e={};return n.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}var Sr=new Map,Ir=0;function ql(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function jl(n,e){let t={stylesheet:ua(e),rules:{}};return Sr.set(n,t),t}function Pr(n,e,t,r,i,o,s,a=0){let l=16.666/r,c=`{
`;for(let q=0;q<=1;q+=l){let U=e+(t-e)*o(q);c+=q*100+`%{${s(U,1-U)}}
`}let d=c+`100% {${s(t,1-t)}}
}`,h=`__svelte_${ql(d)}_${a}`,f=Mr(n),{stylesheet:_,rules:y}=Sr.get(f)||jl(f,n);y[h]||(y[h]=!0,_.insertRule(`@keyframes ${h} ${d}`,_.cssRules.length));let k=n.style.animation||"";return n.style.animation=`${k?`${k}, `:""}${h} ${r}ms linear ${i}ms 1 both`,Ir+=1,h}function os(n,e){let t=(n.style.animation||"").split(", "),r=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),Ir-=i,Ir||zl())}function zl(){Kn(()=>{Ir||(Sr.forEach(n=>{let{ownerNode:e}=n.stylesheet;e&&L(e)}),Sr.clear())})}var an;function Mt(n){an=n}function it(n,e){let t=n.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}var Vt=[];var Ve=[],un=[],as=[],Wl=Promise.resolve(),ls=!1;function ha(){ls||(ls=!0,Wl.then(Tr))}function At(n){un.push(n)}function cn(n){as.push(n)}var ss=new Set,ln=0;function Tr(){if(ln!==0)return;let n=an;do{try{for(;ln<Vt.length;){let e=Vt[ln];ln++,Mt(e),Jl(e.$$)}}catch(e){throw Vt.length=0,ln=0,e}for(Mt(null),Vt.length=0,ln=0;Ve.length;)Ve.pop()();for(let e=0;e<un.length;e+=1){let t=un[e];ss.has(t)||(ss.add(t),t())}un.length=0}while(Vt.length);for(;as.length;)as.pop()();ls=!1,ss.clear(),Mt(n)}function Jl(n){if(n.fragment!==null){n.update(),we(n.before_update);let e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(At)}}function pa(n){let e=[],t=[];un.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),un=e}var $n;function Bl(){return $n||($n=Promise.resolve(),$n.then(()=>{$n=null})),$n}function us(n,e,t){n.dispatchEvent(Ar(`${e?"intro":"outro"}${t}`))}var Cr=new Set,St;function ft(){St={r:0,c:[],p:St}}function dt(){St.r||we(St.c),St=St.p}function Y(n,e){n&&n.i&&(Cr.delete(n),n.i(e))}function ee(n,e,t,r){if(n&&n.o){if(Cr.has(n))return;Cr.add(n),St.c.push(()=>{Cr.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}var Ul={duration:0};function Fr(n,e,t,r){let o=e(n,t,{direction:"both"}),s=r?0:1,a=null,l=null,c=null,d;function h(){c&&os(n,c)}function f(y,k){let q=y.b-s;return k*=Math.abs(q),{a:s,b:y.b,d:q,duration:k,start:y.start,end:y.start+k,group:y.group}}function _(y){let{delay:k=0,duration:q=300,easing:U=Zn,tick:K=le,css:ne}=o||Ul,V={start:ns()+k,b:y};y||(V.group=St,St.r+=1),"inert"in n&&(y?d!==void 0&&(n.inert=d):(d=n.inert,n.inert=!0)),a||l?l=V:(ne&&(h(),c=Pr(n,s,y,q,k,U,ne)),y&&K(0,1),a=f(V,q),At(()=>us(n,y,"start")),rs(ue=>{if(l&&ue>l.start&&(a=f(l,q),l=null,us(n,a.b,"start"),ne&&(h(),c=Pr(n,s,a.b,a.duration,0,U,o.css))),a){if(ue>=a.end)K(s=a.b,1-s),us(n,a.b,"end"),l||(a.b?h():--a.group.r||we(a.group.c)),a=null;else if(ue>=a.start){let ce=ue-a.start;s=a.a+a.d*U(ce/a.duration),K(s,1-s)}}return!!(a||l)}))}return{run(y){De(o)?Bl().then(()=>{o=o({direction:y?"in":"out"}),_(y)}):_(y)},end(){h(),a=l=null}}}function ot(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ma(n,e){n.d(1),e.delete(n.key)}function ya(n,e,t,r,i,o,s,a,l,c,d,h){let f=n.length,_=o.length,y=f,k={};for(;y--;)k[n[y].key]=y;let q=[],U=new Map,K=new Map,ne=[];for(y=_;y--;){let g=h(i,o,y),w=t(g),m=s.get(w);m?r&&ne.push(()=>m.p(g,e)):(m=c(w,g),m.c()),U.set(w,q[y]=m),w in k&&K.set(w,Math.abs(y-k[w]))}let V=new Set,ue=new Set;function ce(g){Y(g,1),g.m(a,d),s.set(g.key,g),d=g.first,_--}for(;f&&_;){let g=q[_-1],w=n[f-1],m=g.key,ae=w.key;g===w?(d=g.first,f--,_--):U.has(ae)?!s.has(m)||V.has(m)?ce(g):ue.has(ae)?f--:K.get(m)>K.get(ae)?(ue.add(m),ce(g)):(V.add(ae),f--):(l(w,s),f--)}for(;f--;){let g=n[f];U.has(g.key)||l(g,s)}for(;_;)ce(q[_-1]);return we(ne),q}var Gl=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Hl=new Set([...Gl]);function fn(n,e,t){let r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function Ye(n){n&&n.c()}function Be(n,e,t){let{fragment:r,after_update:i}=n.$$;r&&r.m(e,t),At(()=>{let o=n.$$.on_mount.map(ts).filter(De);n.$$.on_destroy?n.$$.on_destroy.push(...o):we(o),n.$$.on_mount=[]}),i.forEach(At)}function Ue(n,e){let t=n.$$;t.fragment!==null&&(pa(t.after_update),we(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Yl(n,e){n.$$.dirty[0]===-1&&(Vt.push(n),ha(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Z(n,e,t,r,i,o,s=null,a=[-1]){let l=an;Mt(n);let c=n.$$={fragment:null,ctx:[],props:o,update:le,not_equal:i,bound:kr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:kr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(c.root);let d=!1;if(c.ctx=t?t(n,e.props||{},(h,f,..._)=>{let y=_.length?_[0]:f;return c.ctx&&i(c.ctx[h],c.ctx[h]=y)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](y),d&&Yl(n,h)),f}):[],c.update(),d=!0,we(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){aa();let h=fa(e.target);c.fragment&&c.fragment.l(h),h.forEach(L)}else c.fragment&&c.fragment.c();e.intro&&Y(n.$$.fragment),Be(n,e.target,e.anchor),la(),Tr()}Mt(l)}var Ql;typeof HTMLElement=="function"&&(Ql=class extends HTMLElement{constructor(e,t,r){super();Ce(this,"$$ctor");Ce(this,"$$s");Ce(this,"$$c");Ce(this,"$$cn",!1);Ce(this,"$$d",{});Ce(this,"$$r",!1);Ce(this,"$$p_d",{});Ce(this,"$$l",{});Ce(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,r&&this.attachShadow({mode:"open"})}addEventListener(e,t,r){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,r)}removeEventListener(e,t,r){if(super.removeEventListener(e,t,r),this.$$c){let i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(o){return()=>{let s;return{c:function(){s=S("slot"),o!=="default"&&R(s,"name",o)},m:function(c,d){N(c,s,d)},d:function(c){c&&L(s)}}}};if(await Promise.resolve(),!this.$$cn)return;let t={},r=da(this);for(let o of this.$$s)o in r&&(t[o]=[e(o)]);for(let o of this.attributes){let s=this.$$g_p(o.name);s in this.$$d||(this.$$d[s]=cs(s,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let i=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let s=cs(o,this.$$d[o],this.$$p_d,"toAttribute");s==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,s)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(let o in this.$$l)for(let s of this.$$l[o]){let a=this.$$c.$on(o,s);this.$$l_u.set(s,a)}this.$$l={}}}attributeChangedCallback(e,t,r){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=cs(e,r,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function cs(n,e,t,r){var o;let i=(o=t[n])==null?void 0:o.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!r||!t[n])return e;if(r==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var H=class{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){Ue(this,1),this.$destroy=le}$on(e,t){if(!De(t))return le;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ta(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ga="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ga);var hs=require("obsidian");function gt(n,e){return(0,hs.setIcon)(n,e),{update(t){(0,hs.setIcon)(n,t)}}}function su(n){Je(n,"svelte-12xcpmj","button.svelte-12xcpmj{gap:var(--size-4-1)}.mod-plain.svelte-12xcpmj{background:none;box-shadow:none;border:none;color:var(--text-muted)}.mod-plain.svelte-12xcpmj:hover{color:var(--text-normal)}.disabled.svelte-12xcpmj{opacity:0.6}")}function au(n){let e,t,r,i,o=n[5].default,s=Ne(o,n,n[4],null);return{c(){e=S("button"),s&&s.c(),R(e,"aria-label",n[3]),e.disabled=n[2],R(e,"class","svelte-12xcpmj"),Se(e,"mod-cta",n[1]==="primary"),Se(e,"mod-warning",n[1]==="destructive"),Se(e,"mod-plain",n[1]==="plain"),Se(e,"disabled",n[2])},m(a,l){N(a,e,l),s&&s.m(e,null),n[7](e),t=!0,r||(i=Ae(e,"click",n[6]),r=!0)},p(a,[l]){s&&s.p&&(!t||l&16)&&je(s,o,a,a[4],t?qe(o,a[4],l,null):ze(a[4]),null),(!t||l&8)&&R(e,"aria-label",a[3]),(!t||l&4)&&(e.disabled=a[2]),(!t||l&2)&&Se(e,"mod-cta",a[1]==="primary"),(!t||l&2)&&Se(e,"mod-warning",a[1]==="destructive"),(!t||l&2)&&Se(e,"mod-plain",a[1]==="plain"),(!t||l&4)&&Se(e,"disabled",a[2])},i(a){t||(Y(s,a),t=!0)},o(a){ee(s,a),t=!1},d(a){a&&L(e),s&&s.d(a),n[7](null),r=!1,i()}}}function lu(n,e,t){let{$$slots:r={},$$scope:i}=e,{variant:o="default"}=e,{disabled:s=!1}=e,{tooltip:a=""}=e,{ref:l=null}=e;function c(h){it.call(this,n,h)}function d(h){Ve[h?"unshift":"push"](()=>{l=h,t(0,l)})}return n.$$set=h=>{"variant"in h&&t(1,o=h.variant),"disabled"in h&&t(2,s=h.disabled),"tooltip"in h&&t(3,a=h.tooltip),"ref"in h&&t(0,l=h.ref),"$$scope"in h&&t(4,i=h.$$scope)},[l,o,s,a,i,r,c,d]}var ps=class extends H{constructor(e){super(),Z(this,e,lu,au,X,{variant:1,disabled:2,tooltip:3,ref:0},su)}},Or=ps;var hu=Gt(ka());function Ea(n){let e=n-1;return e*e*e+1}function _s(n,{delay:e=0,duration:t=400,easing:r=Ea,axis:i="y"}={}){let o=getComputedStyle(n),s=+o.opacity,a=i==="y"?"height":"width",l=parseFloat(o[a]),c=i==="y"?["top","bottom"]:["left","right"],d=c.map(U=>`${U[0].toUpperCase()}${U.slice(1)}`),h=parseFloat(o[`padding${d[0]}`]),f=parseFloat(o[`padding${d[1]}`]),_=parseFloat(o[`margin${d[0]}`]),y=parseFloat(o[`margin${d[1]}`]),k=parseFloat(o[`border${d[0]}Width`]),q=parseFloat(o[`border${d[1]}Width`]);return{delay:e,duration:t,easing:r,css:U=>`overflow: hidden;opacity: ${Math.min(U*20,1)*s};${a}: ${U*l}px;padding-${c[0]}: ${U*h}px;padding-${c[1]}: ${U*f}px;margin-${c[0]}: ${U*_}px;margin-${c[1]}: ${U*y}px;border-${c[0]}-width: ${U*k}px;border-${c[1]}-width: ${U*q}px;`}}function Aa(n){let e,t,r,i;return{c(){e=S("div"),R(e,"class","js-engine-message-delete-icon callout-icon"),R(e,"aria-label","remove"),R(e,"role","button"),R(e,"tabindex","0")},m(o,s){N(o,e,s),r||(i=[Ae(e,"click",n[5]),Ae(e,"keydown",n[6]),yt(t=gt.call(null,e,"x"))],r=!0)},p:le,d(o){o&&L(e),r=!1,we(i)}}}function Sa(n){let e,t=n[0].message.content+"",r;return{c(){e=S("p"),r=se(t)},m(i,o){N(i,e,o),E(e,r)},p(i,o){o&1&&t!==(t=i[0].message.content+"")&&ke(r,t)},d(i){i&&L(e)}}}function Ia(n){let e,t,r=n[0].message.code+"",i;return{c(){e=S("pre"),t=S("code"),i=se(r),R(e,"class","language-none")},m(o,s){N(o,e,s),E(e,t),E(t,i)},p(o,s){s&1&&r!==(r=o[0].message.code+"")&&ke(i,r)},d(o){o&&L(e)}}}function Pa(n){let e,t,r,i=n[0].message.type+"",o,s,a,l,c=n[0].time.toISOString()+"",d,h,f,_,y=n[3]&&Ta(n);return{c(){e=S("div"),t=S("p"),r=se("Type: "),o=se(i),s=te(),a=S("p"),l=se("Time: "),d=se(c),h=te(),y&&y.c(),R(e,"class","js-engine-message-detail-content")},m(k,q){N(k,e,q),E(e,t),E(t,r),E(t,o),E(e,s),E(e,a),E(a,l),E(a,d),E(e,h),y&&y.m(e,null),_=!0},p(k,q){(!_||q&1)&&i!==(i=k[0].message.type+"")&&ke(o,i),(!_||q&1)&&c!==(c=k[0].time.toISOString()+"")&&ke(d,c),k[3]?y?y.p(k,q):(y=Ta(k),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i(k){_||(k&&At(()=>{_&&(f||(f=Fr(e,_s,{duration:100},!0)),f.run(1))}),_=!0)},o(k){k&&(f||(f=Fr(e,_s,{duration:100},!1)),f.run(0)),_=!1},d(k){k&&L(e),y&&y.d(),k&&f&&f.end()}}}function Ta(n){let e,t,r=n[0].source.name+"",i,o,s,a,l=n[0].source.id+"",c;return{c(){e=S("p"),t=se("Source Name: "),i=se(r),o=te(),s=S("p"),a=se("Source ID: "),c=se(l)},m(d,h){N(d,e,h),E(e,t),E(e,i),N(d,o,h),N(d,s,h),E(s,a),E(s,c)},p(d,h){h&1&&r!==(r=d[0].source.name+"")&&ke(i,r),h&1&&l!==(l=d[0].source.id+"")&&ke(c,l)},d(d){d&&(L(e),L(o),L(s))}}}function Iu(n){let e,t,r,i,o,s,a=n[0].message.title+"",l,c,d,h,f,_,y,k,q,U,K,ne,V,ue,ce,g,w,m,ae=n[2]&&Aa(n),me=n[0].message.content&&Sa(n),C=n[0].message.code&&Ia(n),x=n[4]&&Pa(n);return{c(){e=S("div"),t=S("div"),r=S("div"),o=te(),s=S("span"),l=se(a),c=te(),ae&&ae.c(),d=te(),h=S("div"),me&&me.c(),f=te(),C&&C.c(),_=te(),y=S("div"),k=S("div"),q=S("span"),q.textContent="Details",U=te(),K=S("div"),ue=te(),x&&x.c(),R(r,"class","js-engine-message-icon callout-icon"),R(s,"class","js-engine-message-title"),R(t,"class","js-engine-message-header callout-title"),R(K,"class","js-engine-message-icon"),R(k,"class","js-engine-message-detail-row"),R(k,"aria-expanded",V=n[4]?"true":"false"),R(k,"role","button"),R(k,"tabindex","0"),R(y,"class","js-engine-message-detail"),R(h,"class","js-engine-message-content callout-content"),R(e,"class",ce="js-engine-message callout "+bs(n[0].message.type)),R(e,"data-callout",g=n[0].message.type)},m(b,A){N(b,e,A),E(e,t),E(t,r),E(t,o),E(t,s),E(s,l),E(t,c),ae&&ae.m(t,null),E(e,d),E(e,h),me&&me.m(h,null),E(h,f),C&&C.m(h,null),E(h,_),E(h,y),E(y,k),E(k,q),E(k,U),E(k,K),E(y,ue),x&&x.m(y,null),w||(m=[yt(i=gt.call(null,r,ws(n[0].message.type))),yt(ne=gt.call(null,K,n[4]?"chevron-down":"chevron-right")),Ae(k,"click",n[7]),Ae(k,"keydown",n[8])],w=!0)},p(b,[A]){i&&De(i.update)&&A&1&&i.update.call(null,ws(b[0].message.type)),A&1&&a!==(a=b[0].message.title+"")&&ke(l,a),b[2]?ae?ae.p(b,A):(ae=Aa(b),ae.c(),ae.m(t,null)):ae&&(ae.d(1),ae=null),b[0].message.content?me?me.p(b,A):(me=Sa(b),me.c(),me.m(h,f)):me&&(me.d(1),me=null),b[0].message.code?C?C.p(b,A):(C=Ia(b),C.c(),C.m(h,_)):C&&(C.d(1),C=null),ne&&De(ne.update)&&A&16&&ne.update.call(null,b[4]?"chevron-down":"chevron-right"),A&16&&V!==(V=b[4]?"true":"false")&&R(k,"aria-expanded",V),b[4]?x?(x.p(b,A),A&16&&Y(x,1)):(x=Pa(b),x.c(),Y(x,1),x.m(y,null)):x&&(ft(),ee(x,1,1,()=>{x=null}),dt()),A&1&&ce!==(ce="js-engine-message callout "+bs(b[0].message.type))&&R(e,"class",ce),A&1&&g!==(g=b[0].message.type)&&R(e,"data-callout",g)},i(b){Y(x)},o(b){ee(x)},d(b){b&&L(e),ae&&ae.d(),me&&me.d(),C&&C.d(),x&&x.d(),w=!1,we(m)}}}function Pu(n,e,t){let{messageWrapper:r}=e,{messageManager:i}=e,{showDeleteButton:o=!0}=e,{showMessageSource:s=!0}=e,a=!1,l=()=>i.removeMessage(r.uuid),c=f=>f.key===" "?i.removeMessage(r.uuid):void 0,d=()=>t(4,a=!a),h=f=>f.key===" "?t(4,a=!a):void 0;return n.$$set=f=>{"messageWrapper"in f&&t(0,r=f.messageWrapper),"messageManager"in f&&t(1,i=f.messageManager),"showDeleteButton"in f&&t(2,o=f.showDeleteButton),"showMessageSource"in f&&t(3,s=f.showMessageSource)},[r,i,o,s,a,l,c,d,h]}var vs=class extends H{constructor(e){super(),Z(this,e,Pu,Iu,X,{messageWrapper:0,messageManager:1,showDeleteButton:2,showMessageSource:3})}},dn=vs;function Ca(n,e,t){let r=n.slice();return r[5]=e[t][0],r[6]=e[t][1],r[7]=e,r[8]=t,r}function Tu(n){let e;return{c(){e=se("Clear All Messages")},m(t,r){N(t,e,r)},d(t){t&&L(e)}}}function Fa(n){let e;return{c(){e=S("p"),e.textContent="None"},m(t,r){N(t,e,r)},p:le,d(t){t&&L(e)}}}function Oa(n){let e,t,r;function i(s){n[4](s,n[6],n[7],n[8])}let o={messageManager:n[0]};return n[6]!==void 0&&(o.messageWrapper=n[6]),e=new dn({props:o}),Ve.push(()=>fn(e,"messageWrapper",i)),{c(){Ye(e.$$.fragment)},m(s,a){Be(e,s,a),r=!0},p(s,a){n=s;let l={};a&1&&(l.messageManager=n[0]),!t&&a&2&&(t=!0,l.messageWrapper=n[6],cn(()=>t=!1)),e.$set(l)},i(s){r||(Y(e.$$.fragment,s),r=!0)},o(s){ee(e.$$.fragment,s),r=!1},d(s){Ue(e,s)}}}function Cu(n){let e,t,r,i,o,s;r=new Or({props:{variant:"destructive",$$slots:{default:[Tu]},$$scope:{ctx:n}}}),r.$on("click",n[3]);let a=ot(n[1]),l=[];for(let h=0;h<a.length;h+=1)l[h]=Oa(Ca(n,a,h));let c=h=>ee(l[h],1,1,()=>{l[h]=null}),d=null;return a.length||(d=Fa(n)),{c(){e=S("h2"),e.textContent="Messages",t=te(),Ye(r.$$.fragment),i=te(),o=S("div");for(let h=0;h<l.length;h+=1)l[h].c();d&&d.c()},m(h,f){N(h,e,f),N(h,t,f),Be(r,h,f),N(h,i,f),N(h,o,f);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(o,null);d&&d.m(o,null),s=!0},p(h,[f]){let _={};if(f&512&&(_.$$scope={dirty:f,ctx:h}),r.$set(_),f&3){a=ot(h[1]);let y;for(y=0;y<a.length;y+=1){let k=Ca(h,a,y);l[y]?(l[y].p(k,f),Y(l[y],1)):(l[y]=Oa(k),l[y].c(),Y(l[y],1),l[y].m(o,null))}for(ft(),y=a.length;y<l.length;y+=1)c(y);dt(),!a.length&&d?d.p(h,f):a.length?d&&(d.d(1),d=null):(d=Fa(h),d.c(),d.m(o,null))}},i(h){if(!s){Y(r.$$.fragment,h);for(let f=0;f<a.length;f+=1)Y(l[f]);s=!0}},o(h){ee(r.$$.fragment,h),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)ee(l[f]);s=!1},d(h){h&&(L(e),L(t),L(i),L(o)),Ue(r,h),sn(l,h),d&&d.d()}}}function Fu(n,e,t){let r,{messageManager:i}=e,o=i.messages;na(n,o,l=>t(1,r=l));let s=()=>i.removeAllMessages();function a(l,c,d,h){d[h][1]=l,o.set(r)}return n.$$set=l=>{"messageManager"in l&&t(0,i=l.messageManager)},[i,r,o,s,a]}var xs=class extends H{constructor(e){super(),Z(this,e,Fu,Cu,X,{messageManager:0})}},La=xs;var Lr=class extends Ra.Modal{constructor(t,r){super(t);this.plugin=r}onOpen(){this.contentEl.empty(),this.component&&this.component.$destroy(),this.component=new La({target:this.contentEl,props:{messageManager:this.plugin.messageManager}})}onClose(){this.contentEl.empty(),this.component&&this.component.$destroy()}};function Da(n){return new ks(n)}var ks=class{constructor(e){this.value=e,this.subscriberCounter=0,this.subscribers=new Map}set(e){this.value!==e&&(this.value=e,this.notify())}update(e){this.set(e(this.value))}get(){return this.value}subscribe(e,t){let r=this.subscriberCounter;return this.subscriberCounter+=1,this.subscribers.set(r,e),e(this.value),()=>{this.subscribers.delete(r)}}notify(){for(let e of this.subscribers.values())e(this.value)}};function Na(n){return[...n]}var Ou=["error","warning","success","tip","info"];function bs(n){return`js-engine-message-mod-${n}`}function ws(n){var t;let e=new Map;return e.set("error","zap"),e.set("warning","alert-triangle"),e.set("success","check"),e.set("tip","flame"),e.set("info","info"),(t=e.get(n))!=null?t:"info"}function Lu(n){return`js-engine-message-indicator-mod-${n}`}var Rr=class{constructor(e,t,r,i){this.type=e,this.title=t,this.content=r,this.code=i}},hn=class{constructor(e,t){this.message=e,this.source=t,this.uuid=self.crypto.randomUUID(),this.time=(0,Nr.moment)()}},Dr=class{constructor(e,t){this.app=e,this.plugin=t,this.messages=Da(new Map)}initStatusBarItem(){this.messageDisplay=new Lr(this.app,this.plugin),this.statusBarItem=this.plugin.addStatusBarItem(),this.statusBarItem.addClass("mod-clickable"),this.statusBarItem.addEventListener("click",()=>{var e;(e=this.messageDisplay)==null||e.open()}),this.updateStatusBarItem(),this.messages.subscribe(e=>{this.updateStatusBarItem()})}addMessage(e,t){let r=new hn(e,t);return this.messages.get().set(r.uuid,r),this.messages.notify(),r}removeMessage(e){this.messages.get().delete(e),this.messages.notify()}removeAllMessages(){this.messages.get().clear(),this.messages.notify()}updateStatusBarItem(){if(!this.statusBarItem)return;this.statusBarItem.empty();let e=this.statusBarItem.createEl("div");(0,Nr.setIcon)(e,"message-square");let t=this.statusBarItem.createEl("span");t.addClass("js-engine-message-counter"),t.innerText=this.messages.get().size.toString();let r=new Set(Array.from(this.messages.get().values()).map(i=>i.message.type));for(let i of Ou)if(r.has(i)){t.addClass(Lu(i));break}r.size===0&&t.addClass("js-engine-message-indicator-mod-info")}getMessagesFromSource(e){let t=this.messages.get();return Na(t.values()).filter(r=>r.source.id===e.id)}};var pn=class{constructor(e,t,r){this.apiInstance=e,this._render=t,this.initialArgs=r}async refresh(...e){var r;let t;try{t=await this._render(...e)}catch(i){console.warn("failed to execute JS",i),i instanceof Error&&(t=this.apiInstance.message.createMessage("error","Failed to execute JS",`Failed to execute JS during reactive execution in execution "${this.apiInstance.instanceId.id}"`,i.stack))}(r=this.renderer)==null||r.render(t)}initialRender(){this.refresh(...this.initialArgs)}setRenderer(e){this.renderer=e}};var mn=class{constructor(e,t,r,i){this.plugin=e,this.container=t,this.sourcePath=r,this.component=i}async render(e){if(e!=null){if(this.container.empty(),typeof e=="string"){this.container.innerText=e;return}if(e instanceof Ht&&(e=e.toMarkdown()),e instanceof Et){console.log(`js-engine | Rendering Markdown String
`,e.content),await e.render(this.plugin.app,this.container,this.sourcePath,this.component);return}if(e instanceof HTMLElement){this.container.append(e);return}if(e instanceof hn){new dn({target:this.container,props:{messageWrapper:e,messageManager:this.plugin.messageManager,showDeleteButton:!1,showMessageSource:!1}});return}if(e instanceof pn){e.setRenderer(this),e.initialRender();return}this.container.innerText=JSON.stringify(e)}}convertToSimpleObject(e){return e instanceof Ht?e.toMarkdown().content:e instanceof Et?e.content:e instanceof HTMLElement?e.outerHTML:e instanceof hn?e.message:e}};var qr=class extends Dt.MarkdownRenderChild{constructor(t,r,i,o){super(t);this.plugin=r,this.content=i,this.ctx=o}getExecutionFile(){if(!this.ctx.sourcePath)return;let t=this.plugin.app.vault.getAbstractFileByPath(this.ctx.sourcePath);if(t&&t instanceof Dt.TFile)return t}buildExecutionContext(){let t=this.getExecutionFile();return{file:t,metadata:this.plugin.app.metadataCache.getFileCache(t),block:void 0}}async tryRun(t){return this.plugin.jsEngine.execute({code:this.content,context:t,contextOverrides:{},component:this,container:this.containerEl})}async renderResults(t){let r=this.buildExecutionContext();this.jsExecution=await this.tryRun(r);let i=this.jsExecution.result;await new mn(this.plugin,t,this.ctx.sourcePath,this).render(i)}renderExecutionStats(t){let r=new Dt.Menu;r.addItem(o=>{o.setTitle("Info"),o.setIcon("info"),o.onClick(()=>{var s;(s=this.jsExecution)==null||s.openStatsModal()})}),r.addItem(o=>{o.setTitle("Rerun"),o.setIcon("rotate-ccw"),o.onClick(()=>{this.render()})});let i=t.createDiv();i.addClass("js-engine-execution-stats-button"),i.addEventListener("click",o=>{r.showAtMouseEvent(o)}),(0,Dt.setIcon)(i,"info")}async render(){var t,r;this.containerEl.empty(),this.containerEl.hasClass("js-engine-execution-render-child")||this.containerEl.addClass("js-engine-execution-render-child");try{await this.renderResults(this.containerEl),this.renderExecutionStats(this.containerEl)}catch(i){this.containerEl.innerText=i instanceof Error?(r=(t=i.stack)==null?void 0:t.toString())!=null?r:"":i,this.containerEl.addClass("mod-warning")}}async onload(){await this.render()}onunload(){}};var jr=class{constructor(e){this.apiInstance=e}createBuilder(){return new Ht}create(e){return new Et(e)}createText(e){return new ct(e,!1,!1,!1)}createBoldText(e){return new ct(e,!0,!1,!1)}createCursiveText(e){return new ct(e,!1,!0,!1)}createUnderlinedText(e){return new ct(e,!1,!1,!0)}createCode(e){return new Bn(e)}createParagraph(e){return new Hn(e)}createHeading(e,t){return new Gn(e,t)}createBlockQuote(){return new Yn}createCallout(e,t,r=""){return new Qn(e,t,r)}createCodeBlock(e,t){return new Vn(e,t)}createTable(e,t){return new Un(e,t)}createList(e){return new Xn(e)}};var zr=class{constructor(e){this.apiInstance=e,this.messageManager=e.plugin.messageManager}createMessage(e,t,r,i=""){return this.messageManager.addMessage(new Rr(e,t,r,i),this.apiInstance.instanceId)}getMessageById(e){return this.messageManager.messages.get().get(e)}getMessagesForInstance(){return this.messageManager.getMessagesFromSource(this.apiInstance.instanceId)}};var Xa=Gt(Hr()),Za=Gt(Ps()),Ka=Gt(er()),Wo=Gt(Cs()),$a=Gt(Ss());var zs={};Zs(zs,{AsyncStream:()=>jo,InvalidArgumentError:()=>_e,LengthError:()=>Xe,Stream:()=>Nt,infinite:()=>Ot,math:()=>Hu,multi:()=>Vu,reduce:()=>Kr,set:()=>Yu,single:()=>_n,summary:()=>Qu,transform:()=>Xu});var _e=class extends Error{},Xe=class extends Error{};var Yt=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},_t=function(n){return this instanceof _t?(this.v=n,this):new _t(n)},ja=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof _t?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}},Ie;(function(n){n[n.SHORTEST=0]="SHORTEST",n[n.LONGEST=1]="LONGEST",n[n.STRICT_EQUAL=2]="STRICT_EQUAL"})(Ie||(Ie={}));function*qt(n,e,...t){if(t.length===0)return;let r=[];for(let i of t)r.push(tr(i));e:for(;;){let i=_n.map(r,l=>l.next()),o=[],s=!0,a=!1;for(let l of i){let c;l.done?(s=!1,c=e):(a=!0,c=l.value),o.push(c)}if(!s&&a)switch(n){case Ie.SHORTEST:break e;case Ie.STRICT_EQUAL:throw new Xe("Iterators must have equal lengths")}if(!a)break;yield o}}function jt(n,e,...t){return ja(this,arguments,function*(){if(t.length===0)return yield _t(void 0);let i=[];for(let o of t)i.push(nr(o));e:for(;;){let o=[];for(let c of i){let d=yield _t(c.next());o.push(d)}let s=[],a=!0,l=!1;for(let c of o){let d;c.done?(a=!1,d=e):(l=!0,d=c.value),s.push(d)}if(!a&&l)switch(n){case Ie.SHORTEST:break e;case Ie.STRICT_EQUAL:throw new Xe("Iterators must have equal lengths")}if(!l)break;yield yield _t(s)}})}var Qt=class{constructor(){this.addedMap=new Map,this.deletedMap=new Map}addUsage(e,t){this.addedMap.has(e)||this.addedMap.set(e,new Map);let r=this.addedMap.get(e);r.has(t)||r.set(t,0),r.set(t,r.get(t)+1)}deleteUsage(e){this.deletedMap.has(e)?this.deletedMap.set(e,this.deletedMap.get(e)+1):this.deletedMap.set(e,1)}getOwnersCount(e){var t,r;let i=(t=this.deletedMap.get(e))!==null&&t!==void 0?t:0;return Nt.of((r=this.addedMap.get(e))!==null&&r!==void 0?r:new Map).map(o=>o[1]).filter(o=>o>i).toValue(o=>o+1,0)}getUsagesCount(e,t=1){var r,i;let o=(r=this.deletedMap.get(e))!==null&&r!==void 0?r:0,s=Nt.of((i=this.addedMap.get(e))!==null&&i!==void 0?i:new Map).map(a=>a[1]).map(a=>a-o).filter(a=>a>0).toArray();for(;s.length>t;){let a=Kr.toMin(s);s=Nt.of(s).map(l=>l-a).filter(l=>l>0).toArray()}return Kr.toSum(s)}},Pe=class{},Xr=class{constructor(e,t){this.related=[],this.positions=[],this.cache=new Map,this.lastCacheIndex=0,this.isValid=!0,this.iterator=e;for(let r=0;r<t;++r)this.related.push(new Rs(this,r)),this.positions.push(0);this.cacheNextValue()}current(e){let t=this.getPosition(e);return this.cache.get(t)}next(e){let[t,r,i]=[this.getPosition(e),Math.min(...this.positions),Math.max(...this.positions)];t===i&&this.cacheNextValue(),this.positions[e.getId()]++,r<Math.min(...this.positions)&&this.cache.delete(r)}valid(e){return this.getPosition(e)<this.lastCacheIndex||this.isValid}getRelatedIterables(){return this.related}cacheNextValue(){let e=this.iterator.next();e.done||this.cache.set(this.lastCacheIndex++,e.value),this.isValid=!e.done}getPosition(e){return this.positions[e.getId()]}},Rs=class{constructor(e,t){this.parent=e,this.id=t}getId(){return this.id}valid(){return this.parent.valid(this)}next(){let e={value:this.current(),done:!this.valid()};return e.done||this.parent.next(this),e}current(){return this.parent.valid(this)?this.parent.current(this):void 0}*[Symbol.iterator](){for(;this.parent.valid(this);)yield this.parent.current(this),this.parent.next(this)}},Zr=class{constructor(e,t){this.related=[],this.positions=[],this.cache=new Map,this.lastCacheIndex=0,this.isValid=!0,this.isFirstIteration=!0,this.iterator=e;for(let r=0;r<t;++r)this.related.push(new Ds(this,r)),this.positions.push(0)}current(e){return Yt(this,void 0,void 0,function*(){this.isFirstIteration&&(yield this.cacheNextValue());let t=this.getPosition(e);return this.cache.get(t)})}next(e){return Yt(this,void 0,void 0,function*(){let[t,r,i]=[this.getPosition(e),Math.min(...this.positions),Math.max(...this.positions)];t===i&&(yield this.cacheNextValue()),this.positions[e.getId()]++,r<Math.min(...this.positions)&&this.cache.delete(r)})}valid(e){return Yt(this,void 0,void 0,function*(){return this.isFirstIteration&&(yield this.cacheNextValue()),this.getPosition(e)<this.lastCacheIndex||this.isValid})}getRelatedIterables(){return this.related}cacheNextValue(){return Yt(this,void 0,void 0,function*(){let e=yield this.iterator.next();e.done||this.cache.set(this.lastCacheIndex++,e.value),this.isFirstIteration=!1,this.isValid=!e.done})}getPosition(e){return this.positions[e.getId()]}},Ds=class{constructor(e,t){this.parent=e,this.id=t}getId(){return this.id}valid(){return Yt(this,void 0,void 0,function*(){return yield this.parent.valid(this)})}next(){return Yt(this,void 0,void 0,function*(){let e={value:yield this.current(),done:!(yield this.valid())};return e.done||(yield this.parent.next(this)),e})}current(){return Yt(this,void 0,void 0,function*(){return(yield this.parent.valid(this))?yield this.parent.current(this):void 0})}[Symbol.asyncIterator](){return ja(this,arguments,function*(){for(;yield _t(this.parent.valid(this));)yield yield _t(yield _t(this.parent.current(this))),yield _t(this.parent.next(this))})}};var rr=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},Fe=function(n){return this instanceof Fe?(this.v=n,this):new Fe(n)},ir=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof Fe?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}};function*vn(...n){for(let e of qt(Ie.SHORTEST,void 0,...n))yield e}function bn(...n){return ir(this,arguments,function*(){var t,r,i,o;try{for(var s=!0,a=rr(jt(Ie.SHORTEST,void 0,...n)),l;l=yield Fe(a.next()),t=l.done,!t;){o=l.value,s=!1;try{yield yield Fe(o)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield Fe(i.call(a)))}finally{if(r)throw r.error}}})}function*$r(n,...e){for(let t of qt(Ie.LONGEST,n,...e))yield t}function ei(n,...e){return ir(this,arguments,function*(){var r,i,o,s;try{for(var a=!0,l=rr(jt(Ie.LONGEST,n,...e)),c;c=yield Fe(l.next()),r=c.done,!r;){s=c.value,a=!1;try{yield yield Fe(s)}finally{a=!0}}}catch(d){i={error:d}}finally{try{!a&&!r&&(o=l.return)&&(yield Fe(o.call(l)))}finally{if(i)throw i.error}}})}function*ti(...n){for(let e of qt(Ie.LONGEST,void 0,...n))yield e}function ni(...n){return ir(this,arguments,function*(){var t,r,i,o;try{for(var s=!0,a=rr(jt(Ie.LONGEST,void 0,...n)),l;l=yield Fe(a.next()),t=l.done,!t;){o=l.value,s=!1;try{yield yield Fe(o)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield Fe(i.call(a)))}finally{if(r)throw r.error}}})}function*wn(...n){for(let e of qt(Ie.STRICT_EQUAL,void 0,...n))yield e}function xn(...n){return ir(this,arguments,function*(){var t,r,i,o;try{for(var s=!0,a=rr(jt(Ie.STRICT_EQUAL,void 0,...n)),l;l=yield Fe(a.next()),t=l.done,!t;){o=l.value,s=!1;try{yield yield Fe(o)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield Fe(i.call(a)))}finally{if(r)throw r.error}}})}function*ri(...n){for(let e of n)for(let t of W(e))yield t}function ii(...n){return ir(this,arguments,function*(){var t,r,i,o;for(let c of n)try{for(var s=!0,a=(r=void 0,rr(D(c))),l;l=yield Fe(a.next()),t=l.done,!t;){o=l.value,s=!1;try{yield yield Fe(o)}finally{s=!0}}}catch(d){r={error:d}}finally{try{!s&&!t&&(i=a.return)&&(yield Fe(i.call(a)))}finally{if(r)throw r.error}}})}var Ge=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},oi=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}};function tt(n,e,t){let r=t;for(let i of W(n))r=e(r,i);return r}function nt(n,e,t){var r,i,o,s;return Ge(this,void 0,void 0,function*(){let a=t;try{for(var l=!0,c=oi(D(n)),d;d=yield c.next(),r=d.done,!r;){s=d.value,l=!1;try{a=yield e(a,s)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield o.call(c))}finally{if(i)throw i.error}}return a})}function si(n){let[e,t]=tt(n,(r,i)=>{let[o,s]=r;return[o+1,s+Number(i)]},[0,0]);return e?t/e:void 0}function ai(n){return Ge(this,void 0,void 0,function*(){let[e,t]=yield nt(n,(r,i)=>{let[o,s]=r;return[o+1,s+Number(i)]},[0,0]);return e?t/e:void 0})}function li(n,e){return e!==void 0?tt(n,(t,r)=>e(r)>e(t!=null?t:r)?r:t!=null?t:r):tt(n,(t,r)=>{let i=t!=null?t:r,o=r;return i>=o?i:o})}function ui(n,e){return Ge(this,void 0,void 0,function*(){return e!==void 0?yield nt(n,(t,r)=>Ge(this,void 0,void 0,function*(){return(yield e(r))>(yield e(t!=null?t:r))?r:t!=null?t:r})):yield nt(n,(t,r)=>{let i=t!=null?t:r,o=r;return i>=o?i:o})})}function ci(n,e){return e!==void 0?tt(n,(t,r)=>e(r)<e(t!=null?t:r)?r:t!=null?t:r):tt(n,(t,r)=>{let i=t!=null?t:r,o=r;return i<=o?i:o})}function fi(n,e){return Ge(this,void 0,void 0,function*(){return e!==void 0?yield nt(n,(t,r)=>Ge(this,void 0,void 0,function*(){return(yield e(r))<(yield e(t!=null?t:r))?r:t!=null?t:r})):yield nt(n,(t,r)=>{let i=t!=null?t:r,o=r;return i<=o?i:o})})}function or(n,e){let t=e!==void 0?e:r=>r;return tt(n,(r,i)=>{var o,s,a,l;return r=r,[t(i)<=t((o=r[0])!==null&&o!==void 0?o:i)?i:(s=r[0])!==null&&s!==void 0?s:i,t(i)>=t((a=r[1])!==null&&a!==void 0?a:i)?i:(l=r[1])!==null&&l!==void 0?l:i]},[void 0,void 0])}function sr(n,e){return Ge(this,void 0,void 0,function*(){let t=e!==void 0?e:r=>r;return yield nt(n,(r,i)=>Ge(this,void 0,void 0,function*(){var o,s,a,l;return r=r,[(yield t(i))<=(yield t((o=r[0])!==null&&o!==void 0?o:i))?i:(s=r[0])!==null&&s!==void 0?s:i,(yield t(i))>=(yield t((a=r[1])!==null&&a!==void 0?a:i))?i:(l=r[1])!==null&&l!==void 0?l:i]}),[void 0,void 0])})}function di(n){let[e,t]=or(zt(n,r=>Number(r)));return(t!=null?t:0)-(e!=null?e:0)}function hi(n){return Ge(this,void 0,void 0,function*(){let[e,t]=yield sr(bt(n,r=>Number(r)));return(t!=null?t:0)-(e!=null?e:0)})}function pi(n){return tt(n,(e,t)=>e+Number(t),0)}function mi(n){return Ge(this,void 0,void 0,function*(){return yield nt(n,(e,t)=>e+Number(t),0)})}function yi(n){return tt(n,(e,t)=>(e!=null?e:1)*t)}function gi(n){return Ge(this,void 0,void 0,function*(){return yield nt(n,(e,t)=>(e!=null?e:1)*t)})}function Xt(n){switch(!0){case n instanceof Array:return n.length;case vt(n):return n.length;case n instanceof Set:return n.size;case n instanceof Map:return n.size}return tt(n,e=>e+1,0)}function kn(n){return Ge(this,void 0,void 0,function*(){switch(!0){case n instanceof Array:case vt(n):case n instanceof Set:case n instanceof Map:return Xt(n)}return yield nt(n,e=>e+1,0)})}function _i(n){for(let e of W(n))return e;throw new Xe("Collection is empty")}function vi(n){var e,t,r,i;return Ge(this,void 0,void 0,function*(){try{for(var o=!0,s=oi(D(n)),a;a=yield s.next(),e=a.done,!e;){i=a.value,o=!1;try{return i}finally{o=!0}}}catch(l){t={error:l}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}throw new Xe("Collection is empty")})}function bi(n){let e=!0,t;for(let r of W(n))t=r,e=!1;if(e)throw new Xe("Collection is empty");return t}function wi(n){var e,t,r,i;return Ge(this,void 0,void 0,function*(){let o=!0,s;try{for(var a=!0,l=oi(D(n)),c;c=yield l.next(),e=c.done,!e;){i=c.value,a=!1;try{s=i,o=!1}finally{a=!0}}}catch(d){t={error:d}}finally{try{!a&&!e&&(r=l.return)&&(yield r.call(l))}finally{if(t)throw t.error}}if(o)throw new Xe("Collection is empty");return s})}function xi(n){let e=Pe,t=Pe;for(let r of W(n))e===Pe&&(e=r),t=r;if(e===Pe)throw new Xe("Collection is empty");return[e,t]}function ki(n){var e,t,r,i;return Ge(this,void 0,void 0,function*(){let o=Pe,s=Pe;try{for(var a=!0,l=oi(D(n)),c;c=yield l.next(),e=c.done,!e;){i=c.value,a=!1;try{let d=i;o===Pe&&(o=d),s=d}finally{a=!0}}}catch(d){t={error:d}}finally{try{!a&&!e&&(r=l.return)&&(yield r.call(l))}finally{if(t)throw t.error}}if(o===Pe)throw new Xe("Collection is empty");return[o,s]})}var ht=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},It=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}};function Ei(n,e){for(let t of W(n))if(!e(t))return!1;return!0}function Mi(n,e){var t,r,i,o;return ht(this,void 0,void 0,function*(){try{for(var s=!0,a=It(D(n)),l;l=yield a.next(),t=l.done,!t;){o=l.value,s=!1;try{if(!(yield e(o)))return!1}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield i.call(a))}finally{if(r)throw r.error}}return!0})}function Ai(n){let e=new Set;for(let t of W(n)){if(e.has(t))return!1;e.add(t)}return!0}function Si(n){var e,t,r,i;return ht(this,void 0,void 0,function*(){let o=new Set;try{for(var s=!0,a=It(D(n)),l;l=yield a.next(),e=l.done,!e;){i=l.value,s=!1;try{let c=i;if(o.has(c))return!1;o.add(c)}finally{s=!0}}}catch(c){t={error:c}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return!0})}function Ii(n,e){for(let t of W(n))if(e(t))return!0;return!1}function Pi(n,e){var t,r,i,o;return ht(this,void 0,void 0,function*(){try{for(var s=!0,a=It(D(n)),l;l=yield a.next(),t=l.done,!t;){o=l.value,s=!1;try{if(yield e(o))return!0}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield i.call(a))}finally{if(r)throw r.error}}return!1})}function Ti(n,e,t){if(e<0)return!1;t===void 0&&(t=i=>!!i);let r=0;for(let i of W(n))if(t(i)&&(r++,r>e))return!1;return r===e}function Ci(n,e,t){var r,i,o,s;return ht(this,void 0,void 0,function*(){if(e<0)return!1;t===void 0&&(t=h=>!!h);let a=0;try{for(var l=!0,c=It(D(n)),d;d=yield c.next(),r=d.done,!r;){s=d.value,l=!1;try{if((yield t(s))&&(a++,a>e))return!1}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield o.call(c))}finally{if(i)throw i.error}}return a===e})}function za(n){for(let e of W(n))return!1;return!0}function Wa(n){var e,t,r,i;return ht(this,void 0,void 0,function*(){try{for(var o=!0,s=It(D(n)),a;a=yield s.next(),e=a.done,!e;){i=a.value,o=!1;try{let l=i;return!1}finally{o=!0}}}catch(l){t={error:l}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return!0})}function Ze(n){return n==null?!1:typeof n[Symbol.iterator]=="function"}function Pt(n){return n==null?!1:typeof n[Symbol.asyncIterator]=="function"}function lt(n){return n==null?!1:n.next!==void 0&&typeof n.next=="function"}function Fi(n){for(let[e,t]of Tt(W(n)))if(e<t)return!1;return!0}function Oi(n){var e,t,r,i;return ht(this,void 0,void 0,function*(){try{for(var o=!0,s=It(Zt(D(n))),a;a=yield s.next(),e=a.done,!e;){i=a.value,o=!1;try{let[l,c]=i;if(l<c)return!1}finally{o=!0}}}catch(l){t={error:l}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return!0})}function Li(n){for(let[e,t]of Tt(W(n)))if(e>t)return!1;return!0}function Ri(n){var e,t,r,i;return ht(this,void 0,void 0,function*(){try{for(var o=!0,s=It(Zt(D(n))),a;a=yield s.next(),e=a.done,!e;){i=a.value,o=!1;try{let[l,c]=i;if(l>c)return!1}finally{o=!0}}}catch(l){t={error:l}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return!0})}function vt(n){return typeof n=="string"||n instanceof String}function Di(n,e){for(let t of W(n))if(e(t))return!1;return!0}function Ni(n,e){var t,r,i,o;return ht(this,void 0,void 0,function*(){try{for(var s=!0,a=It(D(n)),l;l=yield a.next(),t=l.done,!t;){o=l.value,s=!1;try{if(yield e(o))return!1}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield i.call(a))}finally{if(r)throw r.error}}return!0})}function qi(...n){try{for(let e of wn(...n))for(let[t,r]of Tt(e))if(t!==r)return!1}catch(e){return!1}return!0}function ji(...n){var e,t,r,i;return ht(this,void 0,void 0,function*(){try{try{for(var o=!0,s=It(xn(...n)),a;a=yield s.next(),e=a.done,!e;){i=a.value,o=!1;try{let l=i;for(let[c,d]of Tt(l))if(c!==d)return!1}finally{o=!0}}}catch(l){t={error:l}}finally{try{!o&&!e&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}}catch(l){return!1}return!0})}function zi(...n){if(n.length<=1)return!0;let e=n.map(t=>Xt(t));return new Set(e).size===1}function Wi(...n){return ht(this,void 0,void 0,function*(){if(n.length<=1)return!0;let e=yield bt(n,t=>ht(this,void 0,void 0,function*(){return yield kn(t)}));return new Set(yield pt(e)).size===1})}var qs=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},wt=function(n){return this instanceof wt?(this.v=n,this):new wt(n)},Ns=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof wt?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}},Ji=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}};function W(n){if(Ze(n))return n;if(lt(n))return{[Symbol.iterator](){return n}};if(typeof n=="object"&&n!==null)return function*(){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&(yield[e,n[e]])}();throw new _e("Given collection is not iterable or iterator.")}function D(n){if(Pt(n))return n;if(lt(n))return{[Symbol.asyncIterator](){return Ns(this,arguments,function*(){for(;;){let t=yield wt(n.next());if(t.done)return yield wt(void 0);yield yield wt(t.value)}})}};if(typeof n=="object"&&n!==null&&(n=W(n)),Ze(n))return{[Symbol.asyncIterator](){return Ns(this,arguments,function*(){for(let t of n)yield yield wt(t)})}};throw new _e("Given collection is not async iterable or iterator.")}function tr(n){if(lt(n))return n;if(Ze(n))return function*(){for(let e of n)yield e}();throw new _e("Given collection is not iterable or iterator.")}function nr(n){if((lt(n)||Ze(n))&&(n=D(n)),Pt(n))return function(){return Ns(this,arguments,function*(){var e,t,r,i;try{for(var o=!0,s=Ji(n),a;a=yield wt(s.next()),e=a.done,!e;){i=a.value,o=!1;try{yield yield wt(i)}finally{o=!0}}}catch(l){t={error:l}}finally{try{!o&&!e&&(r=s.return)&&(yield wt(r.call(s)))}finally{if(t)throw t.error}}})}();throw new _e("Given collection is not iterable or iterator.")}function Ct(n){let e=[];for(let t of W(n))e.push(t);return e}function pt(n){var e,t,r,i;return qs(this,void 0,void 0,function*(){let o=[];try{for(var s=!0,a=Ji(D(n)),l;l=yield a.next(),e=l.done,!e;){i=l.value,s=!1;try{let c=i;o.push(c)}finally{s=!0}}}catch(c){t={error:c}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return o})}function Bi(n){let e=new Map;for(let[t,r]of W(n))e.set(t,r);return e}function Ui(n){var e,t,r,i;return qs(this,void 0,void 0,function*(){let o=new Map;try{for(var s=!0,a=Ji(D(n)),l;l=yield a.next(),e=l.done,!e;){i=l.value,s=!1;try{let[c,d]=i;o.set(c,d)}finally{s=!0}}}catch(c){t={error:c}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return o})}function Gi(n){let e=new Set;for(let t of W(n))e.add(t);return e}function Hi(n){var e,t,r,i;return qs(this,void 0,void 0,function*(){let o=new Set;try{for(var s=!0,a=Ji(D(n)),l;l=yield a.next(),e=l.done,!e;){i=l.value,s=!1;try{let c=i;o.add(c)}finally{s=!0}}}catch(c){t={error:c}}finally{try{!s&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(t)throw t.error}}return o})}function En(n,e){return new Xr(tr(n),e).getRelatedIterables()}function Mn(n,e){return new Zr(nr(n),e).getRelatedIterables()}var Ju=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},xe=function(n){return this instanceof xe?(this.v=n,this):new xe(n)},An=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},Sn=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof xe?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}},Ja=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(s){return(t=!t)?{value:xe(n[i](s)),done:i==="return"}:o?o(s):s}:o}};function*Kt(n,e){let t=new Set;if(n instanceof Map){e===void 0&&(e=r=>r[1]);for(let r of n){let i=e(r);t.has(i)||(yield r,t.add(i))}}else{e===void 0&&(e=r=>r);for(let r of W(n)){let i=e(r);t.has(i)||(yield r,t.add(i))}}}function In(n,e){return Sn(this,arguments,function*(){var r,i,o,s;let a=new Set;if(n instanceof Map)for(let h of Kt(n,e))yield yield xe(yield xe(h));else{e===void 0&&(e=h=>h);try{for(var l=!0,c=An(D(n)),d;d=yield xe(c.next()),r=d.done,!r;){s=d.value,l=!1;try{let h=s,f=e(h);a.has(f)||(yield yield xe(h),a.add(f))}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield xe(o.call(c)))}finally{if(i)throw i.error}}}})}function*Vi(...n){yield*Pn(n.length,...n)}function Yi(...n){return Sn(this,arguments,function*(){yield xe(yield*Ja(An(Tn(n.length,...n))))})}function*Pn(n,...e){let t=new Qt,r=qt(Ie.LONGEST,Pe,...e);for(let i of r)for(let[o,s]of Ft(i))s!==Pe&&(t.addUsage(s,`${o}`),t.getOwnersCount(s)===n&&(yield s,t.deleteUsage(s)))}function Tn(n,...e){return Sn(this,arguments,function*(){var r,i,o,s;let a=new Qt,l=jt(Ie.LONGEST,Pe,...e);try{for(var c=!0,d=An(l),h;h=yield xe(d.next()),r=h.done,!r;){s=h.value,c=!1;try{let f=s;for(let[_,y]of Ft(f))y!==Pe&&(a.addUsage(y,`${_}`),a.getOwnersCount(y)===n&&(yield yield xe(y),a.deleteUsage(y)))}finally{c=!0}}}catch(f){i={error:f}}finally{try{!c&&!r&&(o=d.return)&&(yield xe(o.call(d)))}finally{if(i)throw i.error}}})}function*Qi(...n){let e=new Qt,t=new Set,r=qt(Ie.LONGEST,Pe,...n);for(let i of r)for(let[o,s]of Ft(i))s!==Pe&&(e.addUsage(s,`${o}`),t.add(s),e.getOwnersCount(s)===n.length&&e.deleteUsage(s));for(let i of t)for(let o of _n.repeat(i,e.getUsagesCount(i)))yield o}function Xi(...n){return Sn(this,arguments,function*(){var t,r,i,o;let s=new Qt,a=new Set,l=jt(Ie.LONGEST,Pe,...n);try{for(var c=!0,d=An(l),h;h=yield xe(d.next()),t=h.done,!t;){o=h.value,c=!1;try{let f=o;for(let[_,y]of Ft(f))y!==Pe&&(s.addUsage(y,`${_}`),a.add(y),s.getOwnersCount(y)===n.length&&s.deleteUsage(y))}finally{c=!0}}}catch(f){r={error:f}}finally{try{!c&&!t&&(i=d.return)&&(yield xe(i.call(d)))}finally{if(r)throw r.error}}for(let f of a)for(let _ of _n.repeat(f,s.getUsagesCount(f)))yield yield xe(_)})}function*Zi(...n){yield*Pn(1,...n)}function Ki(...n){return Sn(this,arguments,function*(){yield xe(yield*Ja(An(Tn(1,...n))))})}function*$i(...n){if(n.length===0)return;if(n.length===1){for(let r of W(n[0]))yield[r];return}let t=Ct(zt(n,r=>Ct(r))).reduce((r,i)=>r.flatMap(o=>i.map(s=>[...o,s])),[[]]);for(let r of t)yield r}function eo(...n){return Sn(this,arguments,function*(){var t,r,i,o;if(n.length===0)return yield xe(void 0);if(n.length===1){try{for(var s=!0,a=An(D(n[0])),l;l=yield xe(a.next()),t=l.done,!t;){o=l.value,s=!1;try{yield yield xe([o])}finally{s=!0}}}catch(h){r={error:h}}finally{try{!s&&!t&&(i=a.return)&&(yield xe(i.call(a)))}finally{if(r)throw r.error}}return yield xe(void 0)}let d=(yield xe(pt(bt(n,h=>Ju(this,void 0,void 0,function*(){return yield pt(h)}))))).reduce((h,f)=>h.flatMap(_=>f.map(y=>[..._,y])),[[]]);for(let h of d)yield yield xe(h)})}var Ee=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},M=function(n){return this instanceof M?(this.v=n,this):new M(n)},Te=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof M?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}};function*zt(n,e){for(let t of W(n))yield e(t)}function bt(n,e){return Te(this,arguments,function*(){var r,i,o,s;try{for(var a=!0,l=Ee(D(n)),c;c=yield M(l.next()),r=c.done,!r;){s=c.value,a=!1;try{yield yield M(yield M(e(s)))}finally{a=!0}}}catch(d){i={error:d}}finally{try{!a&&!r&&(o=l.return)&&(yield M(o.call(l)))}finally{if(i)throw i.error}}})}function*to(n,e){for(let[t,r]of vn(n,e))r&&(yield t)}function no(n,e){return Te(this,arguments,function*(){var r,i,o,s;try{for(var a=!0,l=Ee(bn(n,e)),c;c=yield M(l.next()),r=c.done,!r;){s=c.value,a=!1;try{let[d,h]=s;h&&(yield yield M(d))}finally{a=!0}}}catch(d){i={error:d}}finally{try{!a&&!r&&(o=l.return)&&(yield M(o.call(l)))}finally{if(i)throw i.error}}})}function*ro(n,e){let t=!0;for(let r of W(n)){if(t){if(!e(r)){t=!1,yield r;continue}continue}yield r}}function io(n,e){return Te(this,arguments,function*(){var r,i,o,s;let a=!0;try{for(var l=!0,c=Ee(D(n)),d;d=yield M(c.next()),r=d.done,!r;){s=d.value,l=!1;try{let h=s;if(a){if(!(yield M(e(h)))){a=!1,yield yield M(h);continue}continue}yield yield M(h)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield M(o.call(c)))}finally{if(i)throw i.error}}})}function*oo(n,e){for(let t of W(n))if(e(t))yield t;else break}function so(n,e){return Te(this,arguments,function*(){var r,i,o,s;try{for(var a=!0,l=Ee(D(n)),c;c=yield M(l.next()),r=c.done,!r;){s=c.value,a=!1;try{let d=s;if(yield M(e(d)))yield yield M(d);else break}finally{a=!0}}}catch(d){i={error:d}}finally{try{!a&&!r&&(o=l.return)&&(yield M(o.call(l)))}finally{if(i)throw i.error}}})}function*Ba(n,e){if(e<0)throw new _e(`Number of repetitions cannot be negative: ${e}`);for(let t=e;t>0;--t)yield n}function Ua(n,e){return Te(this,arguments,function*(){if(e<0)throw new _e(`Number of repetitions cannot be negative: ${e}`);let r=yield M(n);for(let i=e;i>0;--i)yield yield M(r)})}function*ao(n,e){for(let t of W(n)){let r=e(t,e);if(Ze(r))for(let i of W(r))yield i;else yield r}}function lo(n,e){return Te(this,arguments,function*(){var r,i,o,s,a,l,c,d;try{for(var h=!0,f=Ee(D(n)),_;_=yield M(f.next()),r=_.done,!r;){s=_.value,h=!1;try{let K=yield M(e(s,e));if(Ze(K)||Pt(K))try{for(var y=!0,k=(l=void 0,Ee(D(K))),q;q=yield M(k.next()),a=q.done,!a;){d=q.value,y=!1;try{yield yield M(d)}finally{y=!0}}}catch(ne){l={error:ne}}finally{try{!y&&!a&&(c=k.return)&&(yield M(c.call(k)))}finally{if(l)throw l.error}}else yield yield M(K)}finally{h=!0}}}catch(U){i={error:U}}finally{try{!h&&!r&&(o=f.return)&&(yield M(o.call(f)))}finally{if(i)throw i.error}}})}function*ar(n,e=1/0){if(e<1){for(let t of W(n))n instanceof Map&&(t=t[1]),yield t;return}for(let t of W(n))if(n instanceof Map&&(t=t[1]),(Ze(t)||lt(t))&&!vt(t))for(let r of ar(t,e-1))yield r;else yield t}function lr(n,e=1/0){return Te(this,arguments,function*(){var r,i,o,s,a,l,c,d,h,f,_,y;if(e<1){try{for(var k=!0,q=Ee(D(n)),U;U=yield M(q.next()),r=U.done,!r;){s=U.value,k=!1;try{let w=s;n instanceof Map&&(w=w[1]),yield yield M(w)}finally{k=!0}}}catch(w){i={error:w}}finally{try{!k&&!r&&(o=q.return)&&(yield M(o.call(q)))}finally{if(i)throw i.error}}return yield M(void 0)}try{for(var K=!0,ne=Ee(D(n)),V;V=yield M(ne.next()),a=V.done,!a;){d=V.value,K=!1;try{let w=d;if(n instanceof Map&&(w=w[1]),(Pt(w)||Ze(w)||lt(w))&&!vt(w))try{for(var ue=!0,ce=(f=void 0,Ee(lr(w,e-1))),g;g=yield M(ce.next()),h=g.done,!h;){y=g.value,ue=!1;try{yield yield M(y)}finally{ue=!0}}}catch(m){f={error:m}}finally{try{!ue&&!h&&(_=ce.return)&&(yield M(_.call(ce)))}finally{if(f)throw f.error}}else yield yield M(w)}finally{K=!0}}}catch(w){l={error:w}}finally{try{!K&&!a&&(c=ne.return)&&(yield M(c.call(ne)))}finally{if(l)throw l.error}}})}function*uo(n,e){for(let t of W(n))e(t)&&(yield t)}function co(n,e){return Te(this,arguments,function*(){var r,i,o,s;try{for(var a=!0,l=Ee(D(n)),c;c=yield M(l.next()),r=c.done,!r;){s=c.value,a=!1;try{let d=s;(yield M(e(d)))&&(yield yield M(d))}finally{a=!0}}}catch(d){i={error:d}}finally{try{!a&&!r&&(o=l.return)&&(yield M(o.call(l)))}finally{if(i)throw i.error}}})}function*Cn(n,e,t,r=!0){if(e<1)throw new _e(`Chunk size must be \u2265 1. Got ${e}`);if(t>=e)throw new _e("Overlap size must be less than chunk size");let i=[],o=!1;for(let s of W(n))o=!1,i.push(s),i.length===e&&(yield i,i=i.slice(e-t),o=!0);!o&&i.length>0&&r&&(yield i)}function Fn(n,e,t,r=!0){return Te(this,arguments,function*(){var o,s,a,l;if(e<1)throw new _e(`Chunk size must be \u2265 1. Got ${e}`);if(t>=e)throw new _e("Overlap size must be less than chunk size");let c=[],d=!1;try{for(var h=!0,f=Ee(D(n)),_;_=yield M(f.next()),o=_.done,!o;){l=_.value,h=!1;try{let y=l;d=!1,c.push(y),c.length===e&&(yield yield M(c),c=c.slice(e-t),d=!0)}finally{h=!0}}}catch(y){s={error:y}}finally{try{!h&&!o&&(a=f.return)&&(yield M(a.call(f)))}finally{if(s)throw s.error}}!d&&c.length>0&&r&&(yield yield M(c))})}function*fo(n,e){for(let t of Cn(n,e,0))yield t}function ho(n,e){return Te(this,arguments,function*(){var r,i,o,s;try{for(var a=!0,l=Ee(Fn(n,e,0)),c;c=yield M(l.next()),r=c.done,!r;){s=c.value,a=!1;try{yield yield M(s)}finally{a=!0}}}catch(d){i={error:d}}finally{try{!a&&!r&&(o=l.return)&&(yield M(o.call(l)))}finally{if(i)throw i.error}}})}function*Tt(n){let e=Cn(n,2,1,!1);for(let t of e)yield t}function Zt(n){return Te(this,arguments,function*(){var t,r,i,o;let s=Fn(n,2,1,!1);try{for(var a=!0,l=Ee(s),c;c=yield M(l.next()),t=c.done,!t;){o=c.value,a=!1;try{yield yield M(o)}finally{a=!0}}}catch(d){r={error:d}}finally{try{!a&&!t&&(i=l.return)&&(yield M(i.call(l)))}finally{if(r)throw r.error}}})}function*po(n,e){if(e<0)throw new _e(`Limit must be \u2265 0. Got ${e}`);let t=0;for(let r of W(n)){if(t>=e)return;yield r,++t}}function mo(n,e){return Te(this,arguments,function*(){var r,i,o,s;if(e<0)throw new _e(`Limit must be \u2265 0. Got ${e}`);let a=0;try{for(var l=!0,c=Ee(D(n)),d;d=yield M(c.next()),r=d.done,!r;){s=d.value,l=!1;try{let h=s;if(a>=e)return yield M(void 0);yield yield M(h),++a}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield M(o.call(c)))}finally{if(i)throw i.error}}})}function*Ft(n){let e=0;for(let t of W(n))yield[e++,t]}function yo(n){return Te(this,arguments,function*(){var t,r,i,o;let s=0;try{for(var a=!0,l=Ee(D(n)),c;c=yield M(l.next()),t=c.done,!t;){o=c.value,a=!1;try{let d=o;yield yield M([s++,d])}finally{a=!0}}}catch(d){r={error:d}}finally{try{!a&&!t&&(i=l.return)&&(yield M(i.call(l)))}finally{if(r)throw r.error}}})}function*go(n,e=0,t,r=1){if(e<0)throw new _e("Parameter 'start' cannot be negative");if(t!==void 0&&t<0)throw new _e("Parameter 'count' cannot be negative");if(r<=0)throw new _e("Parameter 'step' must be positive");let i=0,o=0;for(let s of W(n))if(!(i++<e||(i-e-1)%r!==0)){if(o++===t&&t!==void 0)break;yield s}}function _o(n,e=0,t,r=1){return Te(this,arguments,function*(){var o,s,a,l;if(e<0)throw new _e("Parameter 'start' cannot be negative");if(t!==void 0&&t<0)throw new _e("Parameter 'count' cannot be negative");if(r<=0)throw new _e("Parameter 'step' must be positive");let c=0,d=0;try{for(var h=!0,f=Ee(D(n)),_;_=yield M(f.next()),o=_.done,!o;){l=_.value,h=!1;try{let y=l;if(c++<e||(c-e-1)%r!==0)continue;if(d++===t&&t!==void 0)break;yield yield M(y)}finally{h=!0}}}catch(y){s={error:y}}finally{try{!h&&!o&&(a=f.return)&&(yield M(a.call(f)))}finally{if(s)throw s.error}}})}function*vo(n){for(let[e]of W(n))yield e}function bo(n){return Te(this,arguments,function*(){var t,r,i,o;try{for(var s=!0,a=Ee(D(n)),l;l=yield M(a.next()),t=l.done,!t;){o=l.value,s=!1;try{let[c]=o;yield yield M(c)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield M(i.call(a)))}finally{if(r)throw r.error}}})}function*wo(n,e,t=0){if(e<0||t<0)throw new _e;let r=-t;for(let i of W(n))(r<0||r>=e)&&(yield i),++r}function xo(n,e,t=0){return Te(this,arguments,function*(){var i,o,s,a;if(e<0||t<0)throw new _e;let l=-t;try{for(var c=!0,d=Ee(D(n)),h;h=yield M(d.next()),i=h.done,!i;){a=h.value,c=!1;try{let f=a;(l<0||l>=e)&&(yield yield M(f)),++l}finally{c=!0}}}catch(f){o={error:f}}finally{try{!c&&!i&&(s=d.return)&&(yield M(s.call(d)))}finally{if(o)throw o.error}}})}function*ko(n){for(let[,e]of W(n))yield e}function Eo(n){return Te(this,arguments,function*(){var t,r,i,o;try{for(var s=!0,a=Ee(D(n)),l;l=yield M(a.next()),t=l.done,!t;){o=l.value,s=!1;try{let[,c]=o;yield yield M(c)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield M(i.call(a)))}finally{if(r)throw r.error}}})}function*Mo(n,e,t){let r=new Map,i=o=>{r.has(o)||(t!==void 0?r.set(o,{}):r.set(o,[]))};for(let o of W(n)){let s=e(o),a=t!==void 0?t(o):void 0,l=(Ze(s)||lt(s))&&!vt(s)?s:[s];for(let c of Kt(l))i(c),a===void 0?r.get(c).push(o):r.get(c)[a]=o}for(let o of r)yield o}function Ao(n,e,t){return Te(this,arguments,function*(){var i,o,s,a,l,c,d,h;let f=new Map,_=V=>{f.has(V)||(t!==void 0?f.set(V,{}):f.set(V,[]))};try{for(var y=!0,k=Ee(D(n)),q;q=yield M(k.next()),i=q.done,!i;){a=q.value,y=!1;try{let V=a,ue=yield M(e(V)),ce=t!==void 0?yield M(t(V)):void 0,g=(Pt(ue)||Ze(ue)||lt(ue))&&!vt(ue)?ue:[ue];try{for(var U=!0,K=(c=void 0,Ee(In(g))),ne;ne=yield M(K.next()),l=ne.done,!l;){h=ne.value,U=!1;try{let w=h;_(w),ce===void 0?f.get(w).push(V):f.get(w)[ce]=V}finally{U=!0}}}catch(w){c={error:w}}finally{try{!U&&!l&&(d=K.return)&&(yield M(d.call(K)))}finally{if(c)throw c.error}}}finally{y=!0}}}catch(V){o={error:V}}finally{try{!y&&!i&&(s=k.return)&&(yield M(s.call(k)))}finally{if(o)throw o.error}}for(let V of f)yield yield M(V)})}function*So(n,e){let t=Ct(n);e!==void 0?t.sort(e):t.sort();for(let r of t)yield r}function Io(n,e){return Te(this,arguments,function*(){let r=yield M(pt(n));e!==void 0?r.sort(e):r.sort();for(let i of r)yield yield M(i)})}var Ga=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},Wt=function(n){return this instanceof Wt?(this.v=n,this):new Wt(n)},Bu=function(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=n[i]?function(s){return(t=!t)?{value:Wt(n[i](s)),done:i==="return"}:o?o(s):s}:o}},Uu=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof Wt?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}};function*Ha(n=1,e=1){for(let t=n;;t+=e)yield t}function*js(n){let e=[...W(n)];if(e.length!==0)for(;;)for(let t of e)yield t}function Va(n){return Uu(this,arguments,function*(){var t,r,i,o;let s=[];try{for(var a=!0,l=Ga(D(n)),c;c=yield Wt(l.next()),t=c.done,!t;){o=c.value,a=!1;try{let d=o;s.push(d),yield yield Wt(d)}finally{a=!0}}}catch(d){r={error:d}}finally{try{!a&&!t&&(i=l.return)&&(yield Wt(i.call(l)))}finally{if(r)throw r.error}}yield Wt(yield*Bu(Ga(js(s))))})}function*Ya(n){for(;;)yield n}var On=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},ve=function(n){return this instanceof ve?(this.v=n,this):new ve(n)},Ln=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof ve?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}};function*Po(n,e){let t=0;for(let r of ur(W(n),e))t++,yield r/t}function To(n,e){return Ln(this,arguments,function*(){var r,i,o,s;let a=0;try{for(var l=!0,c=On(cr(D(n),e)),d;d=yield ve(c.next()),r=d.done,!r;){s=d.value,l=!1;try{let h=s;a++,yield yield ve(h/a)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield ve(o.call(c)))}finally{if(i)throw i.error}}})}function*Co(n,e){e!==void 0&&(yield e);let t=e!=null?e:0;for(let r of W(n))t-=Number(r),yield t}function Fo(n,e){return Ln(this,arguments,function*(){var r,i,o,s;e!==void 0&&(yield yield ve(e));let a=e!=null?e:0;try{for(var l=!0,c=On(D(n)),d;d=yield ve(c.next()),r=d.done,!r;){s=d.value,l=!1;try{a-=Number(s),yield yield ve(a)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield ve(o.call(c)))}finally{if(i)throw i.error}}})}function*Oo(n,e){e!==void 0&&(yield e);let t=e!=null?e:-1/0;for(let r of W(n))t=Math.max(t,r),yield t}function Lo(n,e){return Ln(this,arguments,function*(){var r,i,o,s;e!==void 0&&(yield yield ve(e));let a=e!=null?e:-1/0;try{for(var l=!0,c=On(D(n)),d;d=yield ve(c.next()),r=d.done,!r;){s=d.value,l=!1;try{a=Math.max(a,s),yield yield ve(a)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield ve(o.call(c)))}finally{if(i)throw i.error}}})}function*Ro(n,e){e!==void 0&&(yield e);let t=e!=null?e:1/0;for(let r of W(n))t=Math.min(t,r),yield t}function Do(n,e){return Ln(this,arguments,function*(){var r,i,o,s;e!==void 0&&(yield yield ve(e));let a=e!=null?e:1/0;try{for(var l=!0,c=On(D(n)),d;d=yield ve(c.next()),r=d.done,!r;){s=d.value,l=!1;try{a=Math.min(a,s),yield yield ve(a)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield ve(o.call(c)))}finally{if(i)throw i.error}}})}function*No(n,e){e!==void 0&&(yield e);let t=e!=null?e:1;for(let r of W(n))t*=Number(r),yield t}function qo(n,e){return Ln(this,arguments,function*(){var r,i,o,s;e!==void 0&&(yield yield ve(e));let a=e!=null?e:1;try{for(var l=!0,c=On(D(n)),d;d=yield ve(c.next()),r=d.done,!r;){s=d.value,l=!1;try{a*=Number(s),yield yield ve(a)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield ve(o.call(c)))}finally{if(i)throw i.error}}})}function*ur(n,e){e!==void 0&&(yield e);let t=e!=null?e:0;for(let r of W(n))t+=Number(r),yield t}function cr(n,e){return Ln(this,arguments,function*(){var r,i,o,s;e!==void 0&&(yield yield ve(e));let a=e!=null?e:0;try{for(var l=!0,c=On(D(n)),d;d=yield ve(c.next()),r=d.done,!r;){s=d.value,l=!1;try{a+=Number(s),yield yield ve(a)}finally{l=!0}}}catch(h){i={error:h}}finally{try{!l&&!r&&(o=c.return)&&(yield ve(o.call(c)))}finally{if(i)throw i.error}}})}var Nt=class n{static of(e){return new n(W(e))}static ofEmpty(){return new n([])}static ofCount(e=1,t=1){return new n(Ot.count(e,t))}static ofCycle(e){return new n(Ot.cycle(e))}static ofRepeat(e){return new n(Ot.repeat(e))}zipWith(...e){return this.data=vn(this.data,...e),this}zipFilledWith(e,...t){return this.data=$r(e,this.data,...t),this}zipLongestWith(...e){return this.data=ti(this.data,...e),this}zipEqualWith(...e){return this.data=wn(this.data,...e),this}chainWith(...e){return this.data=ri(this.data,...e),this}chunkwiseOverlap(e,t,r=!0){return this.data=Cn(this.data,e,t,r),this}chunkwise(e){return this.data=fo(this.data,e),this}compress(e){return this.data=to(this.data,e),this}dropWhile(e){return this.data=ro(this.data,e),this}filter(e){return this.data=uo(this.data,e),this}enumerate(){return this.data=Ft(this.data),this}keys(){return this.data=vo(this.data),this}limit(e){return this.data=po(this.data,e),this}map(e){return this.data=zt(this.data,e),this}flatMap(e){return this.data=ao(this.data,e),this}flatten(e=1/0){return this.data=ar(this.data,e),this}groupBy(e,t){return this.data=Mo(this.data,e,t),this}pairwise(){return this.data=Tt(this.data),this}runningAverage(e){return this.data=Po(this.data,e),this}runningDifference(e){return this.data=Co(this.data,e),this}runningMax(e){return this.data=Oo(this.data,e),this}runningMin(e){return this.data=Ro(this.data,e),this}runningProduct(e){return this.data=No(this.data,e),this}runningTotal(e){return this.data=ur(this.data,e),this}skip(e,t=0){return this.data=wo(this.data,e,t),this}slice(e=0,t,r=1){return this.data=go(this.data,e,t,r),this}takeWhile(e){return this.data=oo(this.data,e),this}values(){return this.data=ko(this.data),this}sort(e){return this.data=So(this.data,e),this}distinct(e){return this.data=Kt(this.data,e),this}intersectionWith(...e){return this.data=Vi(this.data,...e),this}partialIntersectionWith(e,...t){return this.data=Pn(e,this.data,...t),this}symmetricDifferenceWith(...e){return this.data=Qi(this.data,...e),this}unionWith(...e){return this.data=Zi(this.data,...e),this}cartesianProductWith(...e){return this.data=$i(this.data,...e),this}peek(e){let[t,r]=En(this.data,2);this.data=t;for(let i of r)e(i);return this}peekStream(e){let[t,r]=En(this.data,2);return this.data=t,e(n.of(r)),this}toValue(e,t){return tt(this,e,t)}toAverage(){return si(this)}toCount(){return Xt(this)}toMax(e){return li(this,e)}toMin(e){return ci(this,e)}toMinMax(e){return or(this,e)}toFirst(){return _i(this)}toFirstAndLast(){return xi(this)}toLast(){return bi(this)}toSum(){return pi(this)}toProduct(){return yi(this)}toRange(){return di(this)}allMatch(e){return Ei(this,e)}allUnique(){return Ai(this)}anyMatch(e){return Ii(this,e)}exactlyN(e,t){return Ti(this,e,t)}isSorted(){return Li(this)}isReversed(){return Fi(this)}noneMatch(e){return Di(this,e)}sameWith(...e){return qi(this.data,...e)}sameCountWith(...e){return zi(this.data,...e)}tee(e){return En(this.data,e).map(t=>new n(t))}toArray(){return Ct(this)}toMap(){return Bi(this)}toSet(){return Gi(this)}*[Symbol.iterator](){for(let e of this.data)yield e}constructor(e){this.data=e}};var be=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function l(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},Qa=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},Rn=function(n){return this instanceof Rn?(this.v=n,this):new Rn(n)},Gu=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(_){return new Promise(function(y,k){o.push([f,_,y,k])>1||a(f,_)})})}function a(f,_){try{l(r[f](_))}catch(y){h(o[0][3],y)}}function l(f){f.value instanceof Rn?Promise.resolve(f.value.v).then(c,d):h(o[0][2],f)}function c(f){a("next",f)}function d(f){a("throw",f)}function h(f,_){f(_),o.shift(),o.length&&a(o[0][0],o[0][1])}},jo=class n{static of(e){return new n(D(e))}static ofEmpty(){return new n(D([]))}static ofCount(e=1,t=1){return new n(D(Ot.count(e,t)))}static ofCycle(e){return new n(Ot.cycleAsync(e))}static ofRepeat(e){return new n(D(Ot.repeat(e)))}zipWith(...e){return this.data=bn(this.data,...e),this}zipFilledWith(e,...t){return this.data=ei(e,this.data,...t),this}zipLongestWith(...e){return this.data=ni(this.data,...e),this}zipEqualWith(...e){return this.data=xn(this.data,...e),this}chainWith(...e){return this.data=ii(this.data,...e),this}chunkwiseOverlap(e,t,r=!0){return this.data=Fn(this.data,e,t,r),this}chunkwise(e){return this.data=ho(this.data,e),this}compress(e){return this.data=no(this.data,e),this}dropWhile(e){return this.data=io(this.data,e),this}filter(e){return this.data=co(this.data,e),this}enumerate(){return this.data=yo(this.data),this}keys(){return this.data=bo(this.data),this}limit(e){return this.data=mo(this.data,e),this}map(e){return this.data=bt(this.data,e),this}flatMap(e){return this.data=lo(this.data,e),this}flatten(e=1/0){return this.data=lr(this.data,e),this}groupBy(e,t){return this.data=Ao(this.data,e,t),this}pairwise(){return this.data=Zt(this.data),this}runningAverage(e){return this.data=To(this.data,e),this}runningDifference(e){return this.data=Fo(this.data,e),this}runningMax(e){return this.data=Lo(this.data,e),this}runningMin(e){return this.data=Do(this.data,e),this}runningProduct(e){return this.data=qo(this.data,e),this}runningTotal(e){return this.data=cr(this.data,e),this}skip(e,t=0){return this.data=xo(this.data,e,t),this}slice(e=0,t,r=1){return this.data=_o(this.data,e,t,r),this}takeWhile(e){return this.data=so(this.data,e),this}values(){return this.data=Eo(this.data),this}sort(e){return this.data=Io(this.data,e),this}distinct(e){return this.data=In(this.data,e),this}intersectionWith(...e){return this.data=Yi(this.data,...e),this}partialIntersectionWith(e,...t){return this.data=Tn(e,this.data,...t),this}symmetricDifferenceWith(...e){return this.data=Xi(this.data,...e),this}unionWith(...e){return this.data=Ki(this.data,...e),this}cartesianProductWith(...e){return this.data=eo(this.data,...e),this}peek(e){let[t,r]=Mn(this.data,2);return this.data=t,be(this,void 0,void 0,function*(){var i,o,s,a;try{for(var l=!0,c=Qa(r),d;d=yield c.next(),i=d.done,!i;){a=d.value,l=!1;try{e(a)}finally{l=!0}}}catch(h){o={error:h}}finally{try{!l&&!i&&(s=c.return)&&(yield s.call(c))}finally{if(o)throw o.error}}}),this}peekStream(e){let[t,r]=Mn(this.data,2);return this.data=t,e(n.of(r)),this}toValue(e,t){return be(this,void 0,void 0,function*(){return yield nt(this,e,t)})}toAverage(){return be(this,void 0,void 0,function*(){return yield ai(this)})}toCount(){return be(this,void 0,void 0,function*(){return yield kn(this)})}toMax(e){return be(this,void 0,void 0,function*(){return yield ui(this,e)})}toMin(e){return be(this,void 0,void 0,function*(){return yield fi(this,e)})}toMinMax(e){return be(this,void 0,void 0,function*(){return yield sr(this,e)})}toFirst(){return be(this,void 0,void 0,function*(){return yield vi(this)})}toFirstAndLast(){return be(this,void 0,void 0,function*(){return yield ki(this)})}toLast(){return be(this,void 0,void 0,function*(){return yield wi(this)})}toSum(){return be(this,void 0,void 0,function*(){return yield mi(this)})}toProduct(){return be(this,void 0,void 0,function*(){return yield gi(this)})}toRange(){return be(this,void 0,void 0,function*(){return yield hi(this)})}allMatch(e){return be(this,void 0,void 0,function*(){return yield Mi(this,e)})}allUnique(){return be(this,void 0,void 0,function*(){return yield Si(this)})}anyMatch(e){return be(this,void 0,void 0,function*(){return yield Pi(this,e)})}exactlyNAsync(e,t){return be(this,void 0,void 0,function*(){return Ci(this,e,t)})}isSorted(){return be(this,void 0,void 0,function*(){return yield Ri(this)})}isReversed(){return be(this,void 0,void 0,function*(){return yield Oi(this)})}noneMatch(e){return be(this,void 0,void 0,function*(){return yield Ni(this,e)})}sameWith(...e){return be(this,void 0,void 0,function*(){return yield ji(this.data,...e)})}sameCountWith(...e){return be(this,void 0,void 0,function*(){return yield Wi(this.data,...e)})}tee(e){return Mn(this.data,e).map(t=>new n(t))}toArray(){return be(this,void 0,void 0,function*(){return yield pt(this)})}toMap(){return be(this,void 0,void 0,function*(){return yield Ui(this)})}toSet(){return be(this,void 0,void 0,function*(){return yield Hi(this)})}[Symbol.asyncIterator](){return Gu(this,arguments,function*(){var t,r,i,o;try{for(var s=!0,a=Qa(this.data),l;l=yield Rn(a.next()),t=l.done,!t;){o=l.value,s=!1;try{yield yield Rn(o)}finally{s=!0}}}catch(c){r={error:c}}finally{try{!s&&!t&&(i=a.return)&&(yield Rn(i.call(a)))}finally{if(r)throw r.error}}})}constructor(e){this.data=e}};var _n={chunkwise:fo,chunkwiseOverlap:Cn,compress:to,dropWhile:ro,enumerate:Ft,filter:uo,flatMap:ao,flatten:ar,groupBy:Mo,keys:vo,limit:po,map:zt,pairwise:Tt,repeat:Ba,skip:wo,slice:go,sort:So,takeWhile:oo,values:ko,chunkwiseAsync:ho,chunkwiseOverlapAsync:Fn,compressAsync:no,dropWhileAsync:io,enumerateAsync:yo,filterAsync:co,flatMapAsync:lo,flattenAsync:lr,groupByAsync:Ao,keysAsync:bo,limitAsync:mo,mapAsync:bt,pairwiseAsync:Zt,repeatAsync:Ua,skipAsync:xo,sliceAsync:_o,sortAsync:Io,takeWhileAsync:so,valuesAsync:Eo},Ot={count:Ha,cycle:js,cycleAsync:Va,repeat:Ya},Hu={runningAverage:Po,runningDifference:Co,runningMax:Oo,runningMin:Ro,runningProduct:No,runningTotal:ur,runningAverageAsync:To,runningDifferenceAsync:Fo,runningMaxAsync:Lo,runningMinAsync:Do,runningProductAsync:qo,runningTotalAsync:cr},Vu={chain:ri,zip:vn,zipFilled:$r,zipLongest:ti,zipEqual:wn,chainAsync:ii,zipAsync:bn,zipFilledAsync:ei,zipLongestAsync:ni,zipEqualAsync:xn},Yu={distinct:Kt,intersection:Vi,partialIntersection:Pn,symmetricDifference:Qi,union:Zi,cartesianProduct:$i,distinctAsync:In,intersectionAsync:Yi,partialIntersectionAsync:Tn,symmetricDifferenceAsync:Xi,unionAsync:Ki,cartesianProductAsync:eo},Kr={toAverage:si,toCount:Xt,toFirst:_i,toFirstAndLast:xi,toLast:bi,toMax:li,toMin:ci,toMinMax:or,toProduct:yi,toRange:di,toSum:pi,toValue:tt,toAverageAsync:ai,toCountAsync:kn,toFirstAsync:vi,toFirstAndLastAsync:ki,toLastAsync:wi,toMaxAsync:ui,toMinAsync:fi,toMinMaxAsync:sr,toProductAsync:gi,toRangeAsync:hi,toSumAsync:mi,toValueAsync:nt},Qu={allMatch:Ei,allUnique:Ai,anyMatch:Ii,exactlyN:Ti,isEmpty:za,isAsyncIterable:Pt,isIterable:Ze,isIterator:lt,isReversed:Fi,isSorted:Li,isString:vt,noneMatch:Di,same:qi,sameCount:zi,allMatchAsync:Mi,allUniqueAsync:Si,anyMatchAsync:Pi,exactlyNAsync:Ci,isEmptyAsync:Wa,isReversedAsync:Oi,isSortedAsync:Ri,noneMatchAsync:Ni,sameAsync:ji,sameCountAsync:Wi},Xu={tee:En,toArray:Ct,toAsyncIterable:D,toAsyncIterator:nr,toIterable:W,toIterator:tr,toMap:Bi,toSet:Gi,teeAsync:Mn,toArrayAsync:pt,toMapAsync:Ui,toSetAsync:Hi};var zo=class{constructor(e){this.apiInstance=e}parsinom(){return{P:Xa.P,P_UTILS:Za.P_UTILS,Parser:Ka.Parser,createParsingErrorMessage:Wo.createParsingErrorMessage,ParsingError:Wo.ParsingError,ParserContext:$a.ParserContext}}itertools(){return zs}};var fr=require("obsidian");var Jo=class{constructor(e){this.apiInstance=e}async execute(e){return await this.apiInstance.plugin.jsEngine.execute(e)}createRenderer(e,t,r){return new mn(this.apiInstance.plugin,e,t,r)}async executeFile(e,t){let r=this.apiInstance.app.vault.getAbstractFileByPath(e);if(!r||!(r instanceof fr.TFile))throw new Error(`File ${e} not found.`);let i=t;return i.code=await this.apiInstance.app.vault.read(r),await this.execute(i)}async executeFileSimple(e,t){let r=new fr.Component;r.load();try{return await this.executeFile(e,{component:r,...t})}finally{r.unload()}}async getContextForFile(e){let t=this.apiInstance.app.vault.getAbstractFileByPath(e);if(!t||!(t instanceof fr.TFile))throw new Error(`File ${e} not found.`);let r=this.apiInstance.app.metadataCache.getFileCache(t);return{file:t,metadata:r,block:void 0}}};var Dn=class{constructor(e,t,r){this.app=e,this.plugin=t,this.instanceId=r,this.markdown=new jr(this),this.message=new zr(this),this.lib=new zo(this),this.internal=new Jo(this)}async importJs(e){let t=this.app.vault.adapter.getResourcePath(e);if(!t.includes("?")){let r=this.app.metadataCache.getFirstLinkpathDest(e,"");r&&(t+="?"+r.stat.mtime)}return import(t)}getPlugin(e){return this.app.plugins.getPlugin(e)}reactive(e,...t){return new pn(this,e,t)}};var Nn=class n{constructor(e,t){this.name=e,this.id=t}static create(e){return new n(e,self.crypto.randomUUID())}};var Ku=Gt(require("obsidian")),$u=async function(){}.constructor,Bo=class{constructor(e){this.app=e.app,this.plugin=e.plugin,this.code=e.code,this.context=Object.assign({},e.context,e.contextOverrides),this.uuid=self.crypto.randomUUID(),this.apiInstance=new Dn(this.app,this.plugin,new Nn("JS_EXECUTION",this.uuid)),this.messages=[],this.func=void 0,this.globals={app:this.app,engine:this.apiInstance,context:this.context,component:e.component,container:e.container,obsidian:Ku}}buildFunction(){var t;let e=performance.now();try{this.func=$u(...Object.keys(this.globals),this.code)}catch(r){r instanceof Error&&(this.functionBuildError=r,this.result=(t=this.plugin.api)==null?void 0:t.message.createMessage("error","Failed to parse JS",`Failed to parse JS during execution "${this.uuid}"`,r.stack))}this.functionBuildTime=performance.now()-e}async runFunction(){if(this.functionBuildError)throw new Error("can not run function, function construction failed");if(!this.func)throw new Error("can not run function, function has not been constructed yet");let e=performance.now();try{this.result=await Promise.resolve(this.func(...Object.values(this.globals)))}catch(t){console.warn("failed to execute JS",t),t instanceof Error&&(this.functionRunError=t,this.result=this.apiInstance.message.createMessage("error","Failed to execute JS",`Failed to execute JS during execution "${this.uuid}"`,t.stack))}this.messages=this.apiInstance.message.getMessagesForInstance(),this.functionRunTime=performance.now()-e}isSuccessful(){return!this.functionBuildError&&!this.functionRunError}getMessages(){return this.messages}openStatsModal(){this.plugin.jsEngine.openExecutionStatsModal(this)}};var al=require("obsidian");function el(n,e,t){let r=n.slice();return r[4]=e[t],r}function tl(n,e,t){let r=n.slice();return r[7]=e[t],r}function nl(n){let e;return{c(){e=S("tr"),e.innerHTML="<td>none</td> <td>-</td> "},m(t,r){N(t,e,r)},p:le,d(t){t&&L(e)}}}function rl(n,e){let t,r,i=e[7][0]+"",o,s,a,l=typeof e[7][1],c,d;return{key:n,first:null,c(){t=S("tr"),r=S("td"),o=se(i),s=te(),a=S("td"),c=se(l),d=te(),this.first=t},m(h,f){N(h,t,f),E(t,r),E(r,o),E(t,s),E(t,a),E(a,c),E(t,d)},p(h,f){e=h,f&1&&i!==(i=e[7][0]+"")&&ke(o,i),f&1&&l!==(l=typeof e[7][1])&&ke(c,l)},d(h){h&&L(t)}}}function il(n){let e;return{c(){e=S("p"),e.textContent="None"},m(t,r){N(t,e,r)},p:le,d(t){t&&L(e)}}}function ol(n){let e,t;return e=new dn({props:{messageWrapper:n[4],messageManager:n[0].plugin.messageManager,showDeleteButton:!1,showMessageSource:!1}}),{c(){Ye(e.$$.fragment)},m(r,i){Be(e,r,i),t=!0},p(r,i){let o={};i&1&&(o.messageManager=r[0].plugin.messageManager),e.$set(o)},i(r){t||(Y(e.$$.fragment,r),t=!0)},o(r){ee(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function ec(n){var hr,qn;let e,t,r,i,o,s=n[0].uuid+"",a,l,c,d,h,f,_,y,k,q,U,K=Math.round((hr=n[0].functionBuildTime)!=null?hr:0)+"",ne,V,ue,ce,g,w=Math.round((qn=n[0].functionRunTime)!=null?qn:0)+"",m,ae,me,C,x,b,A,P,J,z,B=[],F=new Map,T,j,re,We,Q,ye=ot(Object.entries(n[0].globals)),He=G=>G[7][0];for(let G=0;G<ye.length;G+=1){let fe=tl(n,ye,G),Oe=He(fe);F.set(Oe,B[G]=rl(Oe,fe))}let ie=null;ye.length||(ie=nl(n));let ge=ot(n[2]),$=[];for(let G=0;G<ge.length;G+=1)$[G]=ol(el(n,ge,G));let Ke=G=>ee($[G],1,1,()=>{$[G]=null}),Me=null;return ge.length||(Me=il(n)),{c(){e=S("div"),t=S("h2"),t.textContent="JS Execution Stats",r=te(),i=S("p"),o=se("Execution ID: "),a=se(s),l=te(),c=S("h3"),c.textContent="Code",d=te(),h=S("pre"),f=S("code"),_=te(),y=S("h3"),y.textContent="Time",k=te(),q=S("p"),U=se("Build Time: "),ne=se(K),V=se(" ms"),ue=te(),ce=S("p"),g=se("Execution Time: "),m=se(w),ae=se(" ms"),me=te(),C=S("h3"),C.textContent="Arguments",x=te(),b=S("div"),A=S("table"),P=S("thead"),P.innerHTML="<tr><th>Argument Name</th> <th>Value Type</th></tr>",J=te(),z=S("tbody");for(let G=0;G<B.length;G+=1)B[G].c();ie&&ie.c(),T=te(),j=S("h3"),j.textContent="Messages",re=te(),We=S("div");for(let G=0;G<$.length;G+=1)$[G].c();Me&&Me.c(),R(f,"class","language-js"),R(h,"class","language-js"),R(b,"class","markdown-rendered")},m(G,fe){N(G,e,fe),E(e,t),E(e,r),E(e,i),E(i,o),E(i,a),E(e,l),E(e,c),E(e,d),E(e,h),E(h,f),f.innerHTML=n[1],E(e,_),E(e,y),E(e,k),E(e,q),E(q,U),E(q,ne),E(q,V),E(e,ue),E(e,ce),E(ce,g),E(ce,m),E(ce,ae),E(e,me),E(e,C),E(e,x),E(e,b),E(b,A),E(A,P),E(A,J),E(A,z);for(let Oe=0;Oe<B.length;Oe+=1)B[Oe]&&B[Oe].m(z,null);ie&&ie.m(z,null),E(e,T),E(e,j),E(e,re),E(e,We);for(let Oe=0;Oe<$.length;Oe+=1)$[Oe]&&$[Oe].m(We,null);Me&&Me.m(We,null),Q=!0},p(G,[fe]){var Oe,pr;if((!Q||fe&1)&&s!==(s=G[0].uuid+"")&&ke(a,s),(!Q||fe&2)&&(f.innerHTML=G[1]),(!Q||fe&1)&&K!==(K=Math.round((Oe=G[0].functionBuildTime)!=null?Oe:0)+"")&&ke(ne,K),(!Q||fe&1)&&w!==(w=Math.round((pr=G[0].functionRunTime)!=null?pr:0)+"")&&ke(m,w),fe&1&&(ye=ot(Object.entries(G[0].globals)),B=ya(B,fe,He,1,G,ye,F,z,ma,rl,null,tl),!ye.length&&ie?ie.p(G,fe):ye.length?ie&&(ie.d(1),ie=null):(ie=nl(G),ie.c(),ie.m(z,null))),fe&5){ge=ot(G[2]);let Le;for(Le=0;Le<ge.length;Le+=1){let mr=el(G,ge,Le);$[Le]?($[Le].p(mr,fe),Y($[Le],1)):($[Le]=ol(mr),$[Le].c(),Y($[Le],1),$[Le].m(We,null))}for(ft(),Le=ge.length;Le<$.length;Le+=1)Ke(Le);dt(),!ge.length&&Me?Me.p(G,fe):ge.length?Me&&(Me.d(1),Me=null):(Me=il(G),Me.c(),Me.m(We,null))}},i(G){if(!Q){for(let fe=0;fe<ge.length;fe+=1)Y($[fe]);Q=!0}},o(G){$=$.filter(Boolean);for(let fe=0;fe<$.length;fe+=1)ee($[fe]);Q=!1},d(G){G&&L(e);for(let fe=0;fe<B.length;fe+=1)B[fe].d();ie&&ie.d(),sn($,G),Me&&Me.d()}}}function tc(n,e,t){let r,{execution:i}=e,o=i.getMessages(),s=window.Prism;return n.$$set=a=>{"execution"in a&&t(0,i=a.execution)},n.$$.update=()=>{n.$$.dirty&1&&t(1,r=s.highlight(i.code,s.languages.javascript,"javascript"))},[i,r,o]}var Ws=class extends H{constructor(e){super(),Z(this,e,tc,ec,X,{execution:0})}},sl=Ws;var Uo=class extends al.Modal{constructor(t,r){super(t);this.plugin=r}setExecution(t){this.execution=t}onOpen(){this.contentEl.empty(),this.component&&this.component.$destroy(),this.contentEl.hasClass("js-engine-execution-stats-modal")||this.contentEl.addClass("js-engine-execution-stats-modal"),this.component=new sl({target:this.contentEl,props:{execution:this.execution}})}onClose(){this.contentEl.empty(),this.component&&this.component.$destroy()}};var Go=class{constructor(e,t){this.app=e,this.plugin=t,this.executionStatsModal=new Uo(this.app,this.plugin),this.activeExecutions=new Map}async execute(e){let t=new Bo({app:this.app,plugin:this.plugin,...e});return this.activeExecutions.set(t.uuid,t),t.buildFunction(),t.functionBuildError||await t.runFunction(),this.activeExecutions.delete(t.uuid),t}openExecutionStatsModal(e){this.executionStatsModal.setExecution(e),this.executionStatsModal.open()}};function Ho(n){var e=n.statementIndent,t=n.jsonld,r=n.json||t,i=n.typescript,o=n.wordCharacters||/[\w$\xa1-\uffff]/,s=function(){function u($e){return{type:$e,style:"keyword"}}var p=u("keyword a"),v=u("keyword b"),I=u("keyword c"),O=u("keyword d"),oe=u("operator"),he={type:"atom",style:"atom"};return{if:u("if"),while:p,with:p,else:v,do:v,try:v,finally:v,return:O,break:O,continue:O,new:u("new"),delete:I,void:I,throw:I,debugger:u("debugger"),var:u("var"),const:u("var"),let:u("var"),function:u("function"),catch:u("catch"),for:u("for"),switch:u("switch"),case:u("case"),default:u("default"),in:oe,typeof:oe,instanceof:oe,true:he,false:he,null:he,undefined:he,NaN:he,Infinity:he,this:u("this"),class:u("class"),super:u("atom"),yield:I,export:u("export"),import:u("import"),extends:I,await:I}}(),a=/[+\-*&%=<>!?|~^@]/,l=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function c(u){for(var p=!1,v,I=!1;(v=u.next())!=null;){if(!p){if(v=="/"&&!I)return;v=="["?I=!0:I&&v=="]"&&(I=!1)}p=!p&&v=="\\"}}var d,h;function f(u,p,v){return d=u,h=v,p}function _(u,p){var v=u.next();if(v=='"'||v=="'")return p.tokenize=y(v),p.tokenize(u,p);if(v=="."&&u.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return f("number","number");if(v=="."&&u.match(".."))return f("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(v))return f(v);if(v=="="&&u.eat(">"))return f("=>","operator");if(v=="0"&&u.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return f("number","number");if(/\d/.test(v))return u.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),f("number","number");if(v=="/")return u.eat("*")?(p.tokenize=k,k(u,p)):u.eat("/")?(u.skipToEnd(),f("comment","comment")):Al(u,p,1)?(c(u),u.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),f("regexp","string.special")):(u.eat("="),f("operator","operator",u.current()));if(v=="`")return p.tokenize=q,q(u,p);if(v=="#"&&u.peek()=="!")return u.skipToEnd(),f("meta","meta");if(v=="#"&&u.eatWhile(o))return f("variable","property");if(v=="<"&&u.match("!--")||v=="-"&&u.match("->")&&!/\S/.test(u.string.slice(0,u.start)))return u.skipToEnd(),f("comment","comment");if(a.test(v))return(v!=">"||!p.lexical||p.lexical.type!=">")&&(u.eat("=")?(v=="!"||v=="=")&&u.eat("="):/[<>*+\-|&?]/.test(v)&&(u.eat(v),v==">"&&u.eat(v))),v=="?"&&u.eat(".")?f("."):f("operator","operator",u.current());if(o.test(v)){u.eatWhile(o);var I=u.current();if(p.lastType!="."){if(s.propertyIsEnumerable(I)){var O=s[I];return f(O.type,O.style,I)}if(I=="async"&&u.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return f("async","keyword",I)}return f("variable","variable",I)}}function y(u){return function(p,v){var I=!1,O;if(t&&p.peek()=="@"&&p.match(l))return v.tokenize=_,f("jsonld-keyword","meta");for(;(O=p.next())!=null&&!(O==u&&!I);)I=!I&&O=="\\";return I||(v.tokenize=_),f("string","string")}}function k(u,p){for(var v=!1,I;I=u.next();){if(I=="/"&&v){p.tokenize=_;break}v=I=="*"}return f("comment","comment")}function q(u,p){for(var v=!1,I;(I=u.next())!=null;){if(!v&&(I=="`"||I=="$"&&u.eat("{"))){p.tokenize=_;break}v=!v&&I=="\\"}return f("quasi","string.special",u.current())}var U="([{}])";function K(u,p){p.fatArrowAt&&(p.fatArrowAt=null);var v=u.string.indexOf("=>",u.start);if(!(v<0)){if(i){var I=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(u.string.slice(u.start,v));I&&(v=I.index)}for(var O=0,oe=!1,he=v-1;he>=0;--he){var $e=u.string.charAt(he),rt=U.indexOf($e);if(rt>=0&&rt<3){if(!O){++he;break}if(--O==0){$e=="("&&(oe=!0);break}}else if(rt>=3&&rt<6)++O;else if(o.test($e))oe=!0;else if(/["'\/`]/.test($e))for(;;--he){if(he==0)return;var Wn=u.string.charAt(he-1);if(Wn==$e&&u.string.charAt(he-2)!="\\"){he--;break}}else if(oe&&!O){++he;break}}oe&&!O&&(p.fatArrowAt=he)}}var ne={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function V(u,p,v,I,O,oe){this.indented=u,this.column=p,this.type=v,this.prev=O,this.info=oe,I!=null&&(this.align=I)}function ue(u,p){for(var v=u.localVars;v;v=v.next)if(v.name==p)return!0;for(var I=u.context;I;I=I.prev)for(var v=I.vars;v;v=v.next)if(v.name==p)return!0}function ce(u,p,v,I,O){var oe=u.cc;for(g.state=u,g.stream=O,g.marked=null,g.cc=oe,g.style=p,u.lexical.hasOwnProperty("align")||(u.lexical.align=!0);;){var he=oe.length?oe.pop():r?Q:re;if(he(v,I)){for(;oe.length&&oe[oe.length-1].lex;)oe.pop()();return g.marked?g.marked:v=="variable"&&ue(u,I)?"variableName.local":p}}}var g={state:null,column:null,marked:null,cc:null};function w(){for(var u=arguments.length-1;u>=0;u--)g.cc.push(arguments[u])}function m(){return w.apply(null,arguments),!0}function ae(u,p){for(var v=p;v;v=v.next)if(v.name==u)return!0;return!1}function me(u){var p=g.state;if(g.marked="def",p.context){if(p.lexical.info=="var"&&p.context&&p.context.block){var v=C(u,p.context);if(v!=null){p.context=v;return}}else if(!ae(u,p.localVars)){p.localVars=new A(u,p.localVars);return}}n.globalVars&&!ae(u,p.globalVars)&&(p.globalVars=new A(u,p.globalVars))}function C(u,p){if(p)if(p.block){var v=C(u,p.prev);return v?v==p.prev?p:new b(v,p.vars,!0):null}else return ae(u,p.vars)?p:new b(p.prev,new A(u,p.vars),!1);else return null}function x(u){return u=="public"||u=="private"||u=="protected"||u=="abstract"||u=="readonly"}function b(u,p,v){this.prev=u,this.vars=p,this.block=v}function A(u,p){this.name=u,this.next=p}var P=new A("this",new A("arguments",null));function J(){g.state.context=new b(g.state.context,g.state.localVars,!1),g.state.localVars=P}function z(){g.state.context=new b(g.state.context,g.state.localVars,!0),g.state.localVars=null}J.lex=z.lex=!0;function B(){g.state.localVars=g.state.context.vars,g.state.context=g.state.context.prev}B.lex=!0;function F(u,p){var v=function(){var I=g.state,O=I.indented;if(I.lexical.type=="stat")O=I.lexical.indented;else for(var oe=I.lexical;oe&&oe.type==")"&&oe.align;oe=oe.prev)O=oe.indented;I.lexical=new V(O,g.stream.column(),u,null,I.lexical,p)};return v.lex=!0,v}function T(){var u=g.state;u.lexical.prev&&(u.lexical.type==")"&&(u.indented=u.lexical.indented),u.lexical=u.lexical.prev)}T.lex=!0;function j(u){function p(v){return v==u?m():u==";"||v=="}"||v==")"||v=="]"?w():m(p)}return p}function re(u,p){return u=="var"?m(F("vardef",p),$o,j(";"),T):u=="keyword a"?m(F("form"),He,re,T):u=="keyword b"?m(F("form"),re,T):u=="keyword d"?g.stream.match(/^\s*$/,!1)?m():m(F("stat"),ge,j(";"),T):u=="debugger"?m(j(";")):u=="{"?m(F("}"),z,gr,T,B):u==";"?m():u=="if"?(g.state.lexical.info=="else"&&g.state.cc[g.state.cc.length-1]==T&&g.state.cc.pop()(),m(F("form"),He,re,T,Us)):u=="function"?m(Rt):u=="for"?m(F("form"),z,Gs,re,B,T):u=="class"||i&&p=="interface"?(g.marked="keyword",m(F("form",u=="class"?u:p),Vs,T)):u=="variable"?i&&p=="declare"?(g.marked="keyword",m(re)):i&&(p=="module"||p=="enum"||p=="type")&&g.stream.match(/^\s*\w/,!1)?(g.marked="keyword",p=="enum"?m(Xs):p=="type"?m(Hs,j("operator"),de,j(";")):m(F("form"),ut,j("{"),F("}"),gr,T,T)):i&&p=="namespace"?(g.marked="keyword",m(F("form"),Q,re,T)):i&&p=="abstract"?(g.marked="keyword",m(re)):m(F("stat"),Le):u=="switch"?m(F("form"),He,j("{"),F("}","switch"),z,gr,T,T,B):u=="case"?m(Q,j(":")):u=="default"?m(j(":")):u=="catch"?m(F("form"),J,We,re,T,B):u=="export"?m(F("stat"),bl,T):u=="import"?m(F("stat"),wl,T):u=="async"?m(re):p=="@"?m(Q,re):w(F("stat"),Q,j(";"),T)}function We(u){if(u=="(")return m(Bt,j(")"))}function Q(u,p){return ie(u,p,!1)}function ye(u,p){return ie(u,p,!0)}function He(u){return u!="("?w():m(F(")"),ge,j(")"),T)}function ie(u,p,v){if(g.state.fatArrowAt==g.stream.start){var I=v?G:qn;if(u=="(")return m(J,F(")"),Re(Bt,")"),T,j("=>"),I,B);if(u=="variable")return w(J,ut,j("=>"),I,B)}var O=v?Ke:$;return ne.hasOwnProperty(u)?m(O):u=="function"?m(Rt,O):u=="class"||i&&p=="interface"?(g.marked="keyword",m(F("form"),vl,T)):u=="keyword c"||u=="async"?m(v?ye:Q):u=="("?m(F(")"),ge,j(")"),T,O):u=="operator"||u=="spread"?m(v?ye:Q):u=="["?m(F("]"),kl,T,O):u=="{"?jn(yr,"}",null,O):u=="quasi"?w(Me,O):u=="new"?m(fe(v)):m()}function ge(u){return u.match(/[;\}\)\],]/)?w():w(Q)}function $(u,p){return u==","?m(ge):Ke(u,p,!1)}function Ke(u,p,v){var I=v==!1?$:Ke,O=v==!1?Q:ye;if(u=="=>")return m(J,v?G:qn,B);if(u=="operator")return/\+\+|--/.test(p)||i&&p=="!"?m(I):i&&p=="<"&&g.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?m(F(">"),Re(de,">"),T,I):p=="?"?m(Q,j(":"),O):m(O);if(u=="quasi")return w(Me,I);if(u!=";"){if(u=="(")return jn(ye,")","call",I);if(u==".")return m(mr,I);if(u=="[")return m(F("]"),ge,j("]"),T,I);if(i&&p=="as")return g.marked="keyword",m(de,I);if(u=="regexp")return g.state.lastType=g.marked="operator",g.stream.backUp(g.stream.pos-g.stream.start-1),m(O)}}function Me(u,p){return u!="quasi"?w():p.slice(p.length-2)!="${"?m(Me):m(ge,hr)}function hr(u){if(u=="}")return g.marked="string.special",g.state.tokenize=q,m(Me)}function qn(u){return K(g.stream,g.state),w(u=="{"?re:Q)}function G(u){return K(g.stream,g.state),w(u=="{"?re:ye)}function fe(u){return function(p){return p=="."?m(u?pr:Oe):p=="variable"&&i?m(pl,u?Ke:$):w(u?ye:Q)}}function Oe(u,p){if(p=="target")return g.marked="keyword",m($)}function pr(u,p){if(p=="target")return g.marked="keyword",m(Ke)}function Le(u){return u==":"?m(T,re):w($,j(";"),T)}function mr(u){if(u=="variable")return g.marked="property",m()}function yr(u,p){if(u=="async")return g.marked="property",m(yr);if(u=="variable"||g.style=="keyword"){if(g.marked="property",p=="get"||p=="set")return m(ul);var v;return i&&g.state.fatArrowAt==g.stream.start&&(v=g.stream.match(/^\s*:\s*/,!1))&&(g.state.fatArrowAt=g.stream.pos+v[0].length),m(Jt)}else{if(u=="number"||u=="string")return g.marked=t?"property":g.style+" property",m(Jt);if(u=="jsonld-keyword")return m(Jt);if(i&&x(p))return g.marked="keyword",m(yr);if(u=="[")return m(Q,$t,j("]"),Jt);if(u=="spread")return m(ye,Jt);if(p=="*")return g.marked="keyword",m(yr);if(u==":")return w(Jt)}}function ul(u){return u!="variable"?w(Jt):(g.marked="property",m(Rt))}function Jt(u){if(u==":")return m(ye);if(u=="(")return w(Rt)}function Re(u,p,v){function I(O,oe){if(v?v.indexOf(O)>-1:O==","){var he=g.state.lexical;return he.info=="call"&&(he.pos=(he.pos||0)+1),m(function($e,rt){return $e==p||rt==p?w():w(u)},I)}return O==p||oe==p?m():v&&v.indexOf(";")>-1?w(u):m(j(p))}return function(O,oe){return O==p||oe==p?m():w(u,I)}}function jn(u,p,v){for(var I=3;I<arguments.length;I++)g.cc.push(arguments[I]);return m(F(p,v),Re(u,p),T)}function gr(u){return u=="}"?m():w(re,gr)}function $t(u,p){if(i){if(u==":")return m(de);if(p=="?")return m($t)}}function cl(u,p){if(i&&(u==":"||p=="in"))return m(de)}function Js(u){if(i&&u==":")return g.stream.match(/^\s*\w+\s+is\b/,!1)?m(Q,fl,de):m(de)}function fl(u,p){if(p=="is")return g.marked="keyword",m()}function de(u,p){if(p=="keyof"||p=="typeof"||p=="infer"||p=="readonly")return g.marked="keyword",m(p=="typeof"?ye:de);if(u=="variable"||p=="void")return g.marked="type",m(xt);if(p=="|"||p=="&")return m(de);if(u=="string"||u=="number"||u=="atom")return m(xt);if(u=="[")return m(F("]"),Re(de,"]",","),T,xt);if(u=="{")return m(F("}"),Xo,T,xt);if(u=="(")return m(Re(Ko,")"),dl,xt);if(u=="<")return m(Re(de,">"),de);if(u=="quasi")return w(Zo,xt)}function dl(u){if(u=="=>")return m(de)}function Xo(u){return u.match(/[\}\)\]]/)?m():u==","||u==";"?m(Xo):w(zn,Xo)}function zn(u,p){if(u=="variable"||g.style=="keyword")return g.marked="property",m(zn);if(p=="?"||u=="number"||u=="string")return m(zn);if(u==":")return m(de);if(u=="[")return m(j("variable"),cl,j("]"),zn);if(u=="(")return w(tn,zn);if(!u.match(/[;\}\)\],]/))return m()}function Zo(u,p){return u!="quasi"?w():p.slice(p.length-2)!="${"?m(Zo):m(de,hl)}function hl(u){if(u=="}")return g.marked="string.special",g.state.tokenize=q,m(Zo)}function Ko(u,p){return u=="variable"&&g.stream.match(/^\s*[?:]/,!1)||p=="?"?m(Ko):u==":"?m(de):u=="spread"?m(Ko):w(de)}function xt(u,p){if(p=="<")return m(F(">"),Re(de,">"),T,xt);if(p=="|"||u=="."||p=="&")return m(de);if(u=="[")return m(de,j("]"),xt);if(p=="extends"||p=="implements")return g.marked="keyword",m(de);if(p=="?")return m(de,j(":"),de)}function pl(u,p){if(p=="<")return m(F(">"),Re(de,">"),T,xt)}function _r(){return w(de,ml)}function ml(u,p){if(p=="=")return m(de)}function $o(u,p){return p=="enum"?(g.marked="keyword",m(Xs)):w(ut,$t,Lt,gl)}function ut(u,p){if(i&&x(p))return g.marked="keyword",m(ut);if(u=="variable")return me(p),m();if(u=="spread")return m(ut);if(u=="[")return jn(yl,"]");if(u=="{")return jn(Bs,"}")}function Bs(u,p){return u=="variable"&&!g.stream.match(/^\s*:/,!1)?(me(p),m(Lt)):(u=="variable"&&(g.marked="property"),u=="spread"?m(ut):u=="}"?w():u=="["?m(Q,j("]"),j(":"),Bs):m(j(":"),ut,Lt))}function yl(){return w(ut,Lt)}function Lt(u,p){if(p=="=")return m(ye)}function gl(u){if(u==",")return m($o)}function Us(u,p){if(u=="keyword b"&&p=="else")return m(F("form","else"),re,T)}function Gs(u,p){if(p=="await")return m(Gs);if(u=="(")return m(F(")"),_l,T)}function _l(u){return u=="var"?m($o,en):u=="variable"?m(en):w(en)}function en(u,p){return u==")"?m():u==";"?m(en):p=="in"||p=="of"?(g.marked="keyword",m(Q,en)):w(Q,en)}function Rt(u,p){if(p=="*")return g.marked="keyword",m(Rt);if(u=="variable")return me(p),m(Rt);if(u=="(")return m(J,F(")"),Re(Bt,")"),T,Js,re,B);if(i&&p=="<")return m(F(">"),Re(_r,">"),T,Rt)}function tn(u,p){if(p=="*")return g.marked="keyword",m(tn);if(u=="variable")return me(p),m(tn);if(u=="(")return m(J,F(")"),Re(Bt,")"),T,Js,B);if(i&&p=="<")return m(F(">"),Re(_r,">"),T,tn)}function Hs(u,p){if(u=="keyword"||u=="variable")return g.marked="type",m(Hs);if(p=="<")return m(F(">"),Re(_r,">"),T)}function Bt(u,p){return p=="@"&&m(Q,Bt),u=="spread"?m(Bt):i&&x(p)?(g.marked="keyword",m(Bt)):i&&u=="this"?m($t,Lt):w(ut,$t,Lt)}function vl(u,p){return u=="variable"?Vs(u,p):vr(u,p)}function Vs(u,p){if(u=="variable")return me(p),m(vr)}function vr(u,p){if(p=="<")return m(F(">"),Re(_r,">"),T,vr);if(p=="extends"||p=="implements"||i&&u==",")return p=="implements"&&(g.marked="keyword"),m(i?de:Q,vr);if(u=="{")return m(F("}"),kt,T)}function kt(u,p){if(u=="async"||u=="variable"&&(p=="static"||p=="get"||p=="set"||i&&x(p))&&g.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return g.marked="keyword",m(kt);if(u=="variable"||g.style=="keyword")return g.marked="property",m(br,kt);if(u=="number"||u=="string")return m(br,kt);if(u=="[")return m(Q,$t,j("]"),br,kt);if(p=="*")return g.marked="keyword",m(kt);if(i&&u=="(")return w(tn,kt);if(u==";"||u==",")return m(kt);if(u=="}")return m();if(p=="@")return m(Q,kt)}function br(u,p){if(p=="!"||p=="?")return m(br);if(u==":")return m(de,Lt);if(p=="=")return m(ye);var v=g.state.lexical.prev,I=v&&v.info=="interface";return w(I?tn:Rt)}function bl(u,p){return p=="*"?(g.marked="keyword",m(es,j(";"))):p=="default"?(g.marked="keyword",m(Q,j(";"))):u=="{"?m(Re(Ys,"}"),es,j(";")):w(re)}function Ys(u,p){if(p=="as")return g.marked="keyword",m(j("variable"));if(u=="variable")return w(ye,Ys)}function wl(u){return u=="string"?m():u=="("?w(Q):u=="."?w($):w(wr,Qs,es)}function wr(u,p){return u=="{"?jn(wr,"}"):(u=="variable"&&me(p),p=="*"&&(g.marked="keyword"),m(xl))}function Qs(u){if(u==",")return m(wr,Qs)}function xl(u,p){if(p=="as")return g.marked="keyword",m(wr)}function es(u,p){if(p=="from")return g.marked="keyword",m(Q)}function kl(u){return u=="]"?m():w(Re(ye,"]"))}function Xs(){return w(F("form"),ut,j("{"),F("}"),Re(El,"}"),T,T)}function El(){return w(ut,Lt)}function Ml(u,p){return u.lastType=="operator"||u.lastType==","||a.test(p.charAt(0))||/[,.]/.test(p.charAt(0))}function Al(u,p,v){return p.tokenize==_&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(p.lastType)||p.lastType=="quasi"&&/\{\s*$/.test(u.string.slice(0,u.pos-(v||0)))}return{name:n.name,startState:function(u){var p={tokenize:_,lastType:"sof",cc:[],lexical:new V(-u,0,"block",!1),localVars:n.localVars,context:n.localVars&&new b(null,null,!1),indented:0};return n.globalVars&&typeof n.globalVars=="object"&&(p.globalVars=n.globalVars),p},token:function(u,p){if(u.sol()&&(p.lexical.hasOwnProperty("align")||(p.lexical.align=!1),p.indented=u.indentation(),K(u,p)),p.tokenize!=k&&u.eatSpace())return null;var v=p.tokenize(u,p);return d=="comment"?v:(p.lastType=d=="operator"&&(h=="++"||h=="--")?"incdec":d,ce(p,v,d,h,u))},indent:function(u,p,v){if(u.tokenize==k||u.tokenize==q)return null;if(u.tokenize!=_)return 0;var I=p&&p.charAt(0),O=u.lexical,oe;if(!/^\s*else\b/.test(p))for(var he=u.cc.length-1;he>=0;--he){var $e=u.cc[he];if($e==T)O=O.prev;else if($e!=Us&&$e!=B)break}for(;(O.type=="stat"||O.type=="form")&&(I=="}"||(oe=u.cc[u.cc.length-1])&&(oe==$||oe==Ke)&&!/^[,\.=+\-*:?[\(]/.test(p));)O=O.prev;e&&O.type==")"&&O.prev.type=="stat"&&(O=O.prev);var rt=O.type,Wn=I==rt;return rt=="vardef"?O.indented+(u.lastType=="operator"||u.lastType==","?O.info.length+1:0):rt=="form"&&I=="{"?O.indented:rt=="form"?O.indented+v.unit:rt=="stat"?O.indented+(Ml(u,p)?e||v.unit:0):O.info=="switch"&&!Wn&&n.doubleIndentSwitch!=!1?O.indented+(/^(?:case|default)\b/.test(p)?v.unit:2*v.unit):O.align?O.column+(Wn?0:1):O.indented+(Wn?0:v.unit)},languageData:{indentOnInput:/^\s*(?:case .*?:|default:|\{|\})$/,commentTokens:r?void 0:{line:"//",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]},wordChars:"$"}}}var dr=Ho({name:"javascript"}),H_=Ho({name:"json",json:!0}),V_=Ho({name:"json",jsonld:!0}),Y_=Ho({name:"typescript",typescript:!0});var Yo=require("obsidian"),Vo=class extends Yo.FuzzySuggestModal{constructor(t,r){super(t.app);this.plugin=t,this.selectCallback=r}getItems(){return this.app.vault.getAllLoadedFiles().filter(r=>r instanceof Yo.TFile).filter(r=>r.extension==="js")}getItemText(t){return t.path}onChooseItem(t,r){this.selectCallback(t)}};var Qo=class extends ll.Plugin{constructor(t,r){super(t,r);this.messageManager=new Dr(this.app,this),this.jsEngine=new Go(this.app,this),this.api=new Dn(this.app,this,Nn.create("PLUGIN"))}async onload(){await this.loadSettings(),this.messageManager.initStatusBarItem(),this.registerMarkdownCodeBlockProcessor("js-engine",(t,r,i)=>{let o=new qr(r,this,t,i);i.addChild(o)}),this.addCommand({id:"execute-js-file",name:"Execute JS File",callback:()=>{new Vo(this,async t=>{await this.api.internal.executeFileSimple(t.path)}).open()}}),await this.registerCodeMirrorMode()}onunload(){}async loadSettings(){let t=await this.loadData();this.settings=Object.assign({},$s,t)}async saveSettings(){await this.saveData(this.settings)}async registerCodeMirrorMode(){window.CodeMirror.defineMode("js-engine",t=>({startState:()=>{var i,o;return(o=(i=dr).startState)==null?void 0:o.call(i,4)},blankLine:i=>{var o,s;return(s=(o=dr).blankLine)==null?void 0:s.call(o,i,4)},copyState:i=>{var o,s;return(s=(o=dr).startState)==null?void 0:s.call(o,4)},token:(i,o)=>{var a,l;return`line-HyperMD-codeblock ${(l=(a=dr).token)==null?void 0:l.call(a,i,o)}`}}))}};
